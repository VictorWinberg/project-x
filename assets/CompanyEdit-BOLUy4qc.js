import{i as I,k as L,j as a,T as S,B as i,g as s,L as o,S as k,f as m}from"./index-VCKufcJc.js";import{u as F,a as K,b as v}from"./useContactsMutations-BPWDR4nO.js";import{u as E}from"./useContactsQueries-sKX1_bFn.js";import{C as $}from"./ContentTabs-CCQf3uyo.js";import{D as l}from"./useSnackbar-CjFvLz19.js";import{F as N}from"./FlexGrow-Bmv0oNju.js";import{u as P,a as T,C as D}from"./useCompaniesMutations-D0230m5x.js";import{a as w}from"./useCompaniesQueries-BaUkx1Uo.js";import{u as U}from"./useAssignmentsQueries-QJ3y9K1s.js";import"./MoreHoriz-CAbWxViP.js";import"./index.esm-C4ui68hP.js";import"./Tooltip-Br_CfaHW.js";const Q=()=>{const r=I(),c=L(),{data:n,isLoading:d}=w(r.id==="new"?void 0:Number(r.id)),{mutate:p}=P(),{mutate:g}=T(),{data:u=[],isLoading:y}=E(),{data:h=[],isLoading:x}=U(),{mutate:C}=F(),{mutate:b}=K(),{mutate:f}=v(),j=e=>{n?g(e):p(e,{onSuccess:t=>c(`/dashboard/companies/${t.companyId}`)})};if(!d)return a.jsxs(a.Fragment,{children:[a.jsx(S,{variant:"h4",color:"primary",children:n?"Redigera företag":"Lägg till företag"}),a.jsx(i,{sx:{my:1}}),a.jsxs(D,{formProps:{values:n},onSubmit:j,children:[a.jsx(i,{sx:{my:1}}),n&&a.jsx(N,{children:a.jsx($,{tabs:[{label:"Interaktioner",content:a.jsx(a.Fragment,{children:"Interaktioner..."})},{label:"Kontakter",content:a.jsx(l,{data:u.filter(e=>e.companyId===n.companyId),getRowId:e=>`${e.contactId}`,state:{isLoading:y},columns:[{accessorKey:"contactName",header:"Namn",Cell:({cell:e,row:t})=>a.jsx(s,{component:o,to:`/dashboard/contacts/${t.original.contactId}`,children:e.getValue()})},{accessorKey:"email",header:"Email"},{accessorKey:"jobTitle",header:"Jobbtitel"},{accessorKey:"phone",header:"Telefonnummer"}],onCreate:e=>C({...e,companyId:n.companyId}),onUpdate:e=>b(e),onDelete:e=>f(e)})},{label:"Söker",content:a.jsx(a.Fragment,{children:"Söker..."})},{label:"Uppdrag",content:a.jsx(l,{data:h.filter(e=>{var t;return((t=e.externalContactPerson)==null?void 0:t.companyId)===n.companyId}),getRowId:e=>`${e.assignmentId}`,state:{isLoading:x},columns:[{accessorKey:"assignmentName",header:"Uppdrag",Cell:({cell:e,row:t})=>a.jsx(s,{component:o,to:`/dashboard/assignments/${t.original.assignmentId}`,children:e.getValue()})},{accessorFn:e=>{var t;return(t=e.responsiblePerson)==null?void 0:t.contactName},header:"Ansvarig",enableEditing:!1,Cell:({cell:e,row:t})=>a.jsx(s,{component:o,to:`/dashboard/contacts/${t.original.responsiblePersonId}`,children:e.getValue()})},{accessorFn:e=>{var t;return(t=e.externalContactPerson)==null?void 0:t.contactName},header:"Extern",enableEditing:!1,Cell:({cell:e,row:t})=>a.jsx(s,{component:o,to:`/dashboard/contacts/${t.original.externalContactPersonId}`,children:e.getValue()})},{accessorKey:"status",header:"Status"},{accessorKey:"fee",header:"Arvode",Cell:({cell:e})=>e.getValue().toLocaleString("sv-SE",{style:"currency",currency:"SEK",minimumFractionDigits:0,maximumFractionDigits:0})}]})},{label:"KYC",content:a.jsx(a.Fragment,{children:"KYC..."})}],selected:1})}),a.jsxs(k,{spacing:2,direction:"row",sx:{mt:3},children:[a.jsx(m,{size:"large",type:"submit",variant:"contained",color:"primary",children:"Spara"}),a.jsx(m,{size:"large",variant:"outlined",color:"primary",onClick:()=>c(-1),children:"Tillbaka"})]})]})]})};export{Q as default};
