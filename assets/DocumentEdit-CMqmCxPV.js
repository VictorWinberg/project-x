import{i as M,k as S,r as o,j as e,T as E,B as y,S as F,f,g as r,L as c}from"./index-VCKufcJc.js";import{u as I}from"./useAssignmentsQueries-QJ3y9K1s.js";import{u as R}from"./useCompaniesQueries-BaUkx1Uo.js";import{u as w}from"./useContactsQueries-sKX1_bFn.js";import{C as N}from"./ContentTabs-CCQf3uyo.js";import{t as i,D as B}from"./useSnackbar-CjFvLz19.js";import{F as K}from"./FlexGrow-Bmv0oNju.js";import{f as z,b as P,a as A,D as G}from"./useDocumentsMutations-DKJAlO4g.js";import"./MoreHoriz-CAbWxViP.js";import"./index.esm-C4ui68hP.js";import"./Tooltip-Br_CfaHW.js";const _=()=>{const s=M(),m=S(),{data:n,isLoading:h}=z(s.id==="new"?void 0:s.id),{mutate:j}=P(),{data:b=[],isLoading:k}=A(s.id==="new"?void 0:{documentId:s.id}),{data:d=[]}=R(),{data:u=[]}=w(),{data:l=[]}=I(),T=o.useMemo(()=>i(d,"companyId"),[d]),L=o.useMemo(()=>i(u,"contactId"),[u]),v=o.useMemo(()=>i(l,"assignmentId"),[l]),D=a=>{j(a,{onSuccess:t=>m(`/documents/${t}`)})};if(h)return;const $=a=>{switch(a){case"company":return"Företag";case"contact":return"Kontakt";case"assignment":return"Uppdrag";default:return null}},C=(a,t)=>{var p,g,x;switch(a){case"company":return e.jsx(r,{component:c,to:`/dashboard/companies/${t}`,children:(p=T.get(t))==null?void 0:p.companyName});case"contact":return e.jsx(r,{component:c,to:`/dashboard/contacts/${t}`,children:(g=L.get(t))==null?void 0:g.contactName});case"assignment":return e.jsx(r,{component:c,to:`/dashboard/assignments/${t}`,children:(x=v.get(t))==null?void 0:x.assignmentName});default:return null}};return e.jsxs(e.Fragment,{children:[e.jsx(E,{variant:"h4",color:"primary",children:n?"Redigera dokument":"Lägg till dokument"}),e.jsx(y,{sx:{my:1}}),e.jsxs(G,{formProps:{defaultValues:n},onSubmit:D,children:[e.jsx(y,{sx:{my:1}}),n&&e.jsx(K,{children:e.jsx(N,{tabs:[{label:"Referenser",content:e.jsx(B,{data:b,getRowId:a=>`${a.documentId}-${a.entityType}-${a.entityId}`,state:{isLoading:k},columns:[{accessorKey:"entityType",header:"Typ",enableEditing:!1,Cell:({row:a})=>$(a.original.entityType)},{accessorKey:"entityId",header:"Länk",enableEditing:!1,Cell:({row:a})=>C(a.original.entityType,a.original.entityId)}]})}]})}),e.jsxs(F,{spacing:2,direction:"row",sx:{mt:3},children:[e.jsx(f,{size:"large",type:"submit",variant:"contained",color:"primary",children:"Spara"}),e.jsx(f,{size:"large",variant:"outlined",color:"primary",onClick:()=>m(-1),children:"Tillbaka"})]})]})]})};export{_ as default};
