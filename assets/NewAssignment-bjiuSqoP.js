var We=(e,r,t)=>{if(!r.has(e))throw TypeError("Cannot "+t)};var S=(e,r,t)=>(We(e,r,"read from private field"),t?t.call(e):r.get(e)),ne=(e,r,t)=>{if(r.has(e))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(e):r.set(e,t)},ce=(e,r,t,i)=>(We(e,r,"write to private field"),i?i.call(e,t):r.set(e,t),t);var fe=(e,r,t)=>(We(e,r,"access private method"),t);import{S as Ht,s as Kt,h as ot,g as $t,n as Vt,i as Ft,r as _e,R as p,j as E,T as Gt,B as ct,G as de,k as xe,f as Qt}from"./index-B_sJm1-I.js";import{n as zt,s as Jt}from"./useQuery-CHZUFmVn.js";import{c as Xt}from"./assignmentsApi-DNMeZVCX.js";import{u as Yt}from"./useContactsQueries-B2MpjBVs.js";import{A as ft}from"./Autocomplete-BN8jsnwq.js";import"./IconButton-DtORXshd.js";var te,re,j,Y,ge,ke,Ae,$e,xt,Zt=(xt=class extends Ht{constructor(r,t){super();ne(this,ge);ne(this,Ae);ne(this,te,void 0);ne(this,re,void 0);ne(this,j,void 0);ne(this,Y,void 0);ce(this,te,r),this.setOptions(t),this.bindMethods(),fe(this,ge,ke).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var i;const t=this.options;this.options=S(this,te).defaultMutationOptions(r),Kt(this.options,t)||S(this,te).getMutationCache().notify({type:"observerOptionsUpdated",mutation:S(this,j),observer:this}),t!=null&&t.mutationKey&&this.options.mutationKey&&ot(t.mutationKey)!==ot(this.options.mutationKey)?this.reset():((i=S(this,j))==null?void 0:i.state.status)==="pending"&&S(this,j).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=S(this,j))==null||r.removeObserver(this)}onMutationUpdate(r){fe(this,ge,ke).call(this),fe(this,Ae,$e).call(this,r)}getCurrentResult(){return S(this,re)}reset(){var r;(r=S(this,j))==null||r.removeObserver(this),ce(this,j,void 0),fe(this,ge,ke).call(this),fe(this,Ae,$e).call(this)}mutate(r,t){var i;return ce(this,Y,t),(i=S(this,j))==null||i.removeObserver(this),ce(this,j,S(this,te).getMutationCache().build(S(this,te),this.options)),S(this,j).addObserver(this),S(this,j).execute(r)}},te=new WeakMap,re=new WeakMap,j=new WeakMap,Y=new WeakMap,ge=new WeakSet,ke=function(){var t;const r=((t=S(this,j))==null?void 0:t.state)??$t();ce(this,re,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Ae=new WeakSet,$e=function(r){Vt.batch(()=>{var t,i,u,a,f,h,F,w;if(S(this,Y)&&this.hasListeners()){const b=S(this,re).variables,v=S(this,re).context;(r==null?void 0:r.type)==="success"?((i=(t=S(this,Y)).onSuccess)==null||i.call(t,r.data,b,v),(a=(u=S(this,Y)).onSettled)==null||a.call(u,r.data,null,b,v)):(r==null?void 0:r.type)==="error"&&((h=(f=S(this,Y)).onError)==null||h.call(f,r.error,b,v),(w=(F=S(this,Y)).onSettled)==null||w.call(F,void 0,r.error,b,v))}this.listeners.forEach(b=>{b(S(this,re))})})},xt);function er(e,r){const t=Ft(),[i]=_e.useState(()=>new Zt(t,e));_e.useEffect(()=>{i.setOptions(e)},[i,e]);const u=_e.useSyncExternalStore(_e.useCallback(f=>i.subscribe(Vt.batchCalls(f)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),a=_e.useCallback((f,h)=>{i.mutate(f,h).catch(zt)},[i]);if(u.error&&Jt(i.options.throwOnError,[u.error]))throw u.error;return{...u,mutate:a,mutateAsync:u.mutate}}var pe=e=>e.type==="checkbox",he=e=>e instanceof Date,M=e=>e==null;const At=e=>typeof e=="object";var T=e=>!M(e)&&!Array.isArray(e)&&At(e)&&!he(e),pt=e=>T(e)&&e.target?pe(e.target)?e.target.checked:e.target.value:e,tr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,St=(e,r)=>e.has(tr(r)),rr=e=>{const r=e.constructor&&e.constructor.prototype;return T(r)&&r.hasOwnProperty("isPrototypeOf")},Ge=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function B(e){let r;const t=Array.isArray(e);if(e instanceof Date)r=new Date(e);else if(e instanceof Set)r=new Set(e);else if(!(Ge&&(e instanceof Blob||e instanceof FileList))&&(t||T(e)))if(r=t?[]:{},!t&&!rr(e))r=e;else for(const i in e)e.hasOwnProperty(i)&&(r[i]=B(e[i]));else return e;return r}var Se=e=>Array.isArray(e)?e.filter(Boolean):[],D=e=>e===void 0,c=(e,r,t)=>{if(!r||!T(e))return t;const i=Se(r.split(/[,[\].]+?/)).reduce((u,a)=>M(u)?u:u[a],e);return D(i)||i===e?D(e[r])?t:e[r]:i},G=e=>typeof e=="boolean",Qe=e=>/^\w*$/.test(e),wt=e=>Se(e.replace(/["|']|\]/g,"").split(/\.|\[/)),A=(e,r,t)=>{let i=-1;const u=Qe(r)?[r]:wt(r),a=u.length,f=a-1;for(;++i<a;){const h=u[i];let F=t;if(i!==f){const w=e[h];F=T(w)||Array.isArray(w)?w:isNaN(+u[i+1])?{}:[]}if(h==="__proto__")return;e[h]=F,e=e[h]}return e};const Re={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},K={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},X={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},sr=p.createContext(null),ze=()=>p.useContext(sr);var Dt=(e,r,t,i=!0)=>{const u={defaultValues:r._defaultValues};for(const a in e)Object.defineProperty(u,a,{get:()=>{const f=a;return r._proxyFormState[f]!==K.all&&(r._proxyFormState[f]=!i||K.all),t&&(t[f]=!0),e[f]}});return u},N=e=>T(e)&&!Object.keys(e).length,Et=(e,r,t,i)=>{t(e);const{name:u,...a}=e;return N(a)||Object.keys(a).length>=Object.keys(r).length||Object.keys(a).find(f=>r[f]===(!i||K.all))},Ce=e=>Array.isArray(e)?e:[e],kt=(e,r,t)=>!e||!r||e===r||Ce(e).some(i=>i&&(t?i===r:i.startsWith(r)||r.startsWith(i)));function Je(e){const r=p.useRef(e);r.current=e,p.useEffect(()=>{const t=!e.disabled&&r.current.subject&&r.current.subject.subscribe({next:r.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}function ir(e){const r=ze(),{control:t=r.control,disabled:i,name:u,exact:a}=e||{},[f,h]=p.useState(t._formState),F=p.useRef(!0),w=p.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),b=p.useRef(u);return b.current=u,Je({disabled:i,next:v=>F.current&&kt(b.current,v.name,a)&&Et(v,w.current,t._updateFormState)&&h({...t._formState,...v}),subject:t._subjects.state}),p.useEffect(()=>(F.current=!0,w.current.isValid&&t._updateValid(!0),()=>{F.current=!1}),[t]),Dt(f,t,w.current,!1)}var Q=e=>typeof e=="string",Ct=(e,r,t,i,u)=>Q(e)?(i&&r.watch.add(e),c(t,e,u)):Array.isArray(e)?e.map(a=>(i&&r.watch.add(a),c(t,a))):(i&&(r.watchAll=!0),t);function nr(e){const r=ze(),{control:t=r.control,name:i,defaultValue:u,disabled:a,exact:f}=e||{},h=p.useRef(i);h.current=i,Je({disabled:a,subject:t._subjects.values,next:b=>{kt(h.current,b.name,f)&&w(B(Ct(h.current,t._names,b.values||t._formValues,!1,u)))}});const[F,w]=p.useState(t._getWatch(i,u));return p.useEffect(()=>t._removeUnmounted()),F}function ar(e){const r=ze(),{name:t,disabled:i,control:u=r.control,shouldUnregister:a}=e,f=St(u._names.array,t),h=nr({control:u,name:t,defaultValue:c(u._formValues,t,c(u._defaultValues,t,e.defaultValue)),exact:!0}),F=ir({control:u,name:t}),w=p.useRef(u.register(t,{...e.rules,value:h,...G(e.disabled)?{disabled:e.disabled}:{}}));return p.useEffect(()=>{const b=u._options.shouldUnregister||a,v=(q,$)=>{const L=c(u._fields,q);L&&(L._f.mount=$)};if(v(t,!0),b){const q=B(c(u._options.defaultValues,t));A(u._defaultValues,t,q),D(c(u._formValues,t))&&A(u._formValues,t,q)}return()=>{(f?b&&!u._state.action:b)?u.unregister(t):v(t,!1)}},[t,u,f,a]),p.useEffect(()=>{c(u._fields,t)&&u._updateDisabledField({disabled:i,fields:u._fields,name:t,value:c(u._fields,t)._f.value})},[i,t,u]),{field:{name:t,value:h,...G(i)||F.disabled?{disabled:F.disabled||i}:{},onChange:p.useCallback(b=>w.current.onChange({target:{value:pt(b),name:t},type:Re.CHANGE}),[t]),onBlur:p.useCallback(()=>w.current.onBlur({target:{value:c(u._formValues,t),name:t},type:Re.BLUR}),[t,u]),ref:b=>{const v=c(u._fields,t);v&&b&&(v._f.ref={focus:()=>b.focus(),select:()=>b.select(),setCustomValidity:q=>b.setCustomValidity(q),reportValidity:()=>b.reportValidity()})}},formState:F,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!c(F.errors,t)},isDirty:{enumerable:!0,get:()=>!!c(F.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!c(F.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!c(F.validatingFields,t)},error:{enumerable:!0,get:()=>c(F.errors,t)}})}}const ur=e=>e.render(ar(e));var lr=(e,r,t,i,u)=>r?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[i]:u||!0}}:{},dt=e=>({isOnSubmit:!e||e===K.onSubmit,isOnBlur:e===K.onBlur,isOnChange:e===K.onChange,isOnAll:e===K.all,isOnTouch:e===K.onTouched}),yt=(e,r,t)=>!t&&(r.watchAll||r.watch.has(e)||[...r.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const Fe=(e,r,t,i)=>{for(const u of t||Object.keys(e)){const a=c(e,u);if(a){const{_f:f,...h}=a;if(f){if(f.refs&&f.refs[0]&&r(f.refs[0],u)&&!i)break;if(f.ref&&r(f.ref,f.name)&&!i)break;Fe(h,r)}else T(h)&&Fe(h,r)}}};var or=(e,r,t)=>{const i=Se(c(e,t));return A(i,"root",r[t]),A(e,t,i),e},Xe=e=>e.type==="file",se=e=>typeof e=="function",Te=e=>{if(!Ge)return!1;const r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},Oe=e=>Q(e),Ye=e=>e.type==="radio",Le=e=>e instanceof RegExp;const ht={value:!1,isValid:!1},gt={value:!0,isValid:!0};var Ot=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!D(e[0].attributes.value)?D(e[0].value)||e[0].value===""?gt:{value:e[0].value,isValid:!0}:gt:ht}return ht};const vt={isValid:!1,value:null};var Rt=e=>Array.isArray(e)?e.reduce((r,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:r,vt):vt;function bt(e,r,t="validate"){if(Oe(e)||Array.isArray(e)&&e.every(Oe)||G(e)&&!e)return{type:t,message:Oe(e)?e:"",ref:r}}var ye=e=>T(e)&&!Le(e)?e:{value:e,message:""},mt=async(e,r,t,i,u)=>{const{ref:a,refs:f,required:h,maxLength:F,minLength:w,min:b,max:v,pattern:q,validate:$,name:L,valueAsNumber:Be,mount:Z,disabled:ee}=e._f,_=c(r,L);if(!Z||ee)return{};const z=f?f[0]:a,J=m=>{i&&z.reportValidity&&(z.setCustomValidity(G(m)?"":m||""),z.reportValidity())},C={},ue=Ye(a),we=pe(a),ie=ue||we,le=(Be||Xe(a))&&D(a.value)&&D(_)||Te(a)&&a.value===""||_===""||Array.isArray(_)&&!_.length,P=lr.bind(null,L,t,C),De=(m,x,O,U=X.maxLength,H=X.minLength)=>{const W=m?x:O;C[L]={type:m?U:H,message:W,ref:a,...P(m?U:H,W)}};if(u?!Array.isArray(_)||!_.length:h&&(!ie&&(le||M(_))||G(_)&&!_||we&&!Ot(f).isValid||ue&&!Rt(f).isValid)){const{value:m,message:x}=Oe(h)?{value:!!h,message:h}:ye(h);if(m&&(C[L]={type:X.required,message:x,ref:z,...P(X.required,x)},!t))return J(x),C}if(!le&&(!M(b)||!M(v))){let m,x;const O=ye(v),U=ye(b);if(!M(_)&&!isNaN(_)){const H=a.valueAsNumber||_&&+_;M(O.value)||(m=H>O.value),M(U.value)||(x=H<U.value)}else{const H=a.valueAsDate||new Date(_),W=me=>new Date(new Date().toDateString()+" "+me),ve=a.type=="time",be=a.type=="week";Q(O.value)&&_&&(m=ve?W(_)>W(O.value):be?_>O.value:H>new Date(O.value)),Q(U.value)&&_&&(x=ve?W(_)<W(U.value):be?_<U.value:H<new Date(U.value))}if((m||x)&&(De(!!m,O.message,U.message,X.max,X.min),!t))return J(C[L].message),C}if((F||w)&&!le&&(Q(_)||u&&Array.isArray(_))){const m=ye(F),x=ye(w),O=!M(m.value)&&_.length>+m.value,U=!M(x.value)&&_.length<+x.value;if((O||U)&&(De(O,m.message,x.message),!t))return J(C[L].message),C}if(q&&!le&&Q(_)){const{value:m,message:x}=ye(q);if(Le(m)&&!_.match(m)&&(C[L]={type:X.pattern,message:x,ref:a,...P(X.pattern,x)},!t))return J(x),C}if($){if(se($)){const m=await $(_,r),x=bt(m,z);if(x&&(C[L]={...x,...P(X.validate,x.message)},!t))return J(x.message),C}else if(T($)){let m={};for(const x in $){if(!N(m)&&!t)break;const O=bt(await $[x](_,r),z,x);O&&(m={...O,...P(x,O.message)},J(O.message),t&&(C[L]=m))}if(!N(m)&&(C[L]={ref:z,...m},!t))return C}}return J(!0),C};function cr(e,r){const t=r.slice(0,-1).length;let i=0;for(;i<t;)e=D(e)?i++:e[r[i++]];return e}function fr(e){for(const r in e)if(e.hasOwnProperty(r)&&!D(e[r]))return!1;return!0}function R(e,r){const t=Array.isArray(r)?r:Qe(r)?[r]:wt(r),i=t.length===1?e:cr(e,t),u=t.length-1,a=t[u];return i&&delete i[a],u!==0&&(T(i)&&N(i)||Array.isArray(i)&&fr(i))&&R(e,t.slice(0,-1)),e}var qe=()=>{let e=[];return{get observers(){return e},next:u=>{for(const a of e)a.next&&a.next(u)},subscribe:u=>(e.push(u),{unsubscribe:()=>{e=e.filter(a=>a!==u)}}),unsubscribe:()=>{e=[]}}},Ue=e=>M(e)||!At(e);function ae(e,r){if(Ue(e)||Ue(r))return e===r;if(he(e)&&he(r))return e.getTime()===r.getTime();const t=Object.keys(e),i=Object.keys(r);if(t.length!==i.length)return!1;for(const u of t){const a=e[u];if(!i.includes(u))return!1;if(u!=="ref"){const f=r[u];if(he(a)&&he(f)||T(a)&&T(f)||Array.isArray(a)&&Array.isArray(f)?!ae(a,f):a!==f)return!1}}return!0}var Tt=e=>e.type==="select-multiple",dr=e=>Ye(e)||pe(e),He=e=>Te(e)&&e.isConnected,Lt=e=>{for(const r in e)if(se(e[r]))return!0;return!1};function Me(e,r={}){const t=Array.isArray(e);if(T(e)||t)for(const i in e)Array.isArray(e[i])||T(e[i])&&!Lt(e[i])?(r[i]=Array.isArray(e[i])?[]:{},Me(e[i],r[i])):M(e[i])||(r[i]=!0);return r}function Ut(e,r,t){const i=Array.isArray(e);if(T(e)||i)for(const u in e)Array.isArray(e[u])||T(e[u])&&!Lt(e[u])?D(r)||Ue(t[u])?t[u]=Array.isArray(e[u])?Me(e[u],[]):{...Me(e[u])}:Ut(e[u],M(r)?{}:r[u],t[u]):t[u]=!ae(e[u],r[u]);return t}var Ee=(e,r)=>Ut(e,r,Me(r)),Mt=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:i})=>D(e)?e:r?e===""?NaN:e&&+e:t&&Q(e)?new Date(e):i?i(e):e;function Ke(e){const r=e.ref;if(!(e.refs?e.refs.every(t=>t.disabled):r.disabled))return Xe(r)?r.files:Ye(r)?Rt(e.refs).value:Tt(r)?[...r.selectedOptions].map(({value:t})=>t):pe(r)?Ot(e.refs).value:Mt(D(r.value)?e.ref.value:r.value,e)}var yr=(e,r,t,i)=>{const u={};for(const a of e){const f=c(r,a);f&&A(u,a,f._f)}return{criteriaMode:t,names:[...e],fields:u,shouldUseNativeValidation:i}},Ve=e=>D(e)?e:Le(e)?e.source:T(e)?Le(e.value)?e.value.source:e.value:e,hr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function _t(e,r,t){const i=c(e,t);if(i||Qe(t))return{error:i,name:t};const u=t.split(".");for(;u.length;){const a=u.join("."),f=c(r,a),h=c(e,a);if(f&&!Array.isArray(f)&&t!==a)return{name:t};if(h&&h.type)return{name:a,error:h};u.pop()}return{name:t}}var gr=(e,r,t,i,u)=>u.isOnAll?!1:!t&&u.isOnTouch?!(r||e):(t?i.isOnBlur:u.isOnBlur)?!e:(t?i.isOnChange:u.isOnChange)?e:!0,vr=(e,r)=>!Se(c(e,r)).length&&R(e,r);const br={mode:K.onSubmit,reValidateMode:K.onChange,shouldFocusError:!0};function mr(e={}){let r={...br,...e},t={submitCount:0,isDirty:!1,isLoading:se(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},i={},u=T(r.defaultValues)||T(r.values)?B(r.defaultValues||r.values)||{}:{},a=r.shouldUnregister?{}:B(u),f={action:!1,mount:!1,watch:!1},h={mount:new Set,unMount:new Set,array:new Set,watch:new Set},F,w=0;const b={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},v={values:qe(),array:qe(),state:qe()},q=dt(r.mode),$=dt(r.reValidateMode),L=r.criteriaMode===K.all,Be=s=>n=>{clearTimeout(w),w=setTimeout(s,n)},Z=async s=>{if(b.isValid||s){const n=r.resolver?N((await ie()).errors):await P(i,!0);n!==t.isValid&&v.state.next({isValid:n})}},ee=(s,n)=>{(b.isValidating||b.validatingFields)&&((s||Array.from(h.mount)).forEach(l=>{l&&(n?A(t.validatingFields,l,n):R(t.validatingFields,l))}),v.state.next({validatingFields:t.validatingFields,isValidating:!N(t.validatingFields)}))},_=(s,n=[],l,y,d=!0,o=!0)=>{if(y&&l){if(f.action=!0,o&&Array.isArray(c(i,s))){const g=l(c(i,s),y.argA,y.argB);d&&A(i,s,g)}if(o&&Array.isArray(c(t.errors,s))){const g=l(c(t.errors,s),y.argA,y.argB);d&&A(t.errors,s,g),vr(t.errors,s)}if(b.touchedFields&&o&&Array.isArray(c(t.touchedFields,s))){const g=l(c(t.touchedFields,s),y.argA,y.argB);d&&A(t.touchedFields,s,g)}b.dirtyFields&&(t.dirtyFields=Ee(u,a)),v.state.next({name:s,isDirty:m(s,n),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else A(a,s,n)},z=(s,n)=>{A(t.errors,s,n),v.state.next({errors:t.errors})},J=s=>{t.errors=s,v.state.next({errors:t.errors,isValid:!1})},C=(s,n,l,y)=>{const d=c(i,s);if(d){const o=c(a,s,D(l)?c(u,s):l);D(o)||y&&y.defaultChecked||n?A(a,s,n?o:Ke(d._f)):U(s,o),f.mount&&Z()}},ue=(s,n,l,y,d)=>{let o=!1,g=!1;const V={name:s},k=!!(c(i,s)&&c(i,s)._f.disabled);if(!l||y){b.isDirty&&(g=t.isDirty,t.isDirty=V.isDirty=m(),o=g!==V.isDirty);const I=k||ae(c(u,s),n);g=!!(!k&&c(t.dirtyFields,s)),I||k?R(t.dirtyFields,s):A(t.dirtyFields,s,!0),V.dirtyFields=t.dirtyFields,o=o||b.dirtyFields&&g!==!I}if(l){const I=c(t.touchedFields,s);I||(A(t.touchedFields,s,l),V.touchedFields=t.touchedFields,o=o||b.touchedFields&&I!==l)}return o&&d&&v.state.next(V),o?V:{}},we=(s,n,l,y)=>{const d=c(t.errors,s),o=b.isValid&&G(n)&&t.isValid!==n;if(e.delayError&&l?(F=Be(()=>z(s,l)),F(e.delayError)):(clearTimeout(w),F=null,l?A(t.errors,s,l):R(t.errors,s)),(l?!ae(d,l):d)||!N(y)||o){const g={...y,...o&&G(n)?{isValid:n}:{},errors:t.errors,name:s};t={...t,...g},v.state.next(g)}},ie=async s=>{ee(s,!0);const n=await r.resolver(a,r.context,yr(s||h.mount,i,r.criteriaMode,r.shouldUseNativeValidation));return ee(s),n},le=async s=>{const{errors:n}=await ie(s);if(s)for(const l of s){const y=c(n,l);y?A(t.errors,l,y):R(t.errors,l)}else t.errors=n;return n},P=async(s,n,l={valid:!0})=>{for(const y in s){const d=s[y];if(d){const{_f:o,...g}=d;if(o){const V=h.array.has(o.name);ee([y],!0);const k=await mt(d,a,L,r.shouldUseNativeValidation&&!n,V);if(ee([y]),k[o.name]&&(l.valid=!1,n))break;!n&&(c(k,o.name)?V?or(t.errors,k,o.name):A(t.errors,o.name,k[o.name]):R(t.errors,o.name))}g&&await P(g,n,l)}}return l.valid},De=()=>{for(const s of h.unMount){const n=c(i,s);n&&(n._f.refs?n._f.refs.every(l=>!He(l)):!He(n._f.ref))&&je(s)}h.unMount=new Set},m=(s,n)=>(s&&n&&A(a,s,n),!ae(Ze(),u)),x=(s,n,l)=>Ct(s,h,{...f.mount?a:D(n)?u:Q(s)?{[s]:n}:n},l,n),O=s=>Se(c(f.mount?a:u,s,e.shouldUnregister?c(u,s,[]):[])),U=(s,n,l={})=>{const y=c(i,s);let d=n;if(y){const o=y._f;o&&(!o.disabled&&A(a,s,Mt(n,o)),d=Te(o.ref)&&M(n)?"":n,Tt(o.ref)?[...o.ref.options].forEach(g=>g.selected=d.includes(g.value)):o.refs?pe(o.ref)?o.refs.length>1?o.refs.forEach(g=>(!g.defaultChecked||!g.disabled)&&(g.checked=Array.isArray(d)?!!d.find(V=>V===g.value):d===g.value)):o.refs[0]&&(o.refs[0].checked=!!d):o.refs.forEach(g=>g.checked=g.value===d):Xe(o.ref)?o.ref.value="":(o.ref.value=d,o.ref.type||v.values.next({name:s,values:{...a}})))}(l.shouldDirty||l.shouldTouch)&&ue(s,d,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&me(s)},H=(s,n,l)=>{for(const y in n){const d=n[y],o=`${s}.${y}`,g=c(i,o);(h.array.has(s)||!Ue(d)||g&&!g._f)&&!he(d)?H(o,d,l):U(o,d,l)}},W=(s,n,l={})=>{const y=c(i,s),d=h.array.has(s),o=B(n);A(a,s,o),d?(v.array.next({name:s,values:{...a}}),(b.isDirty||b.dirtyFields)&&l.shouldDirty&&v.state.next({name:s,dirtyFields:Ee(u,a),isDirty:m(s,o)})):y&&!y._f&&!M(o)?H(s,o,l):U(s,o,l),yt(s,h)&&v.state.next({...t}),v.values.next({name:f.mount?s:void 0,values:{...a}})},ve=async s=>{f.mount=!0;const n=s.target;let l=n.name,y=!0;const d=c(i,l),o=()=>n.type?Ke(d._f):pt(s),g=V=>{y=Number.isNaN(V)||V===c(a,l,V)};if(d){let V,k;const I=o(),oe=s.type===Re.BLUR||s.type===Re.FOCUS_OUT,Pt=!hr(d._f)&&!r.resolver&&!c(t.errors,l)&&!d._f.deps||gr(oe,c(t.touchedFields,l),t.isSubmitted,$,q),Ne=yt(l,h,oe);A(a,l,I),oe?(d._f.onBlur&&d._f.onBlur(s),F&&F(0)):d._f.onChange&&d._f.onChange(s);const Pe=ue(l,I,oe,!1),Wt=!N(Pe)||Ne;if(!oe&&v.values.next({name:l,type:s.type,values:{...a}}),Pt)return b.isValid&&Z(),Wt&&v.state.next({name:l,...Ne?{}:Pe});if(!oe&&Ne&&v.state.next({...t}),r.resolver){const{errors:ut}=await ie([l]);if(g(I),y){const qt=_t(t.errors,i,l),lt=_t(ut,i,qt.name||l);V=lt.error,l=lt.name,k=N(ut)}}else ee([l],!0),V=(await mt(d,a,L,r.shouldUseNativeValidation))[l],ee([l]),g(I),y&&(V?k=!1:b.isValid&&(k=await P(i,!0)));y&&(d._f.deps&&me(d._f.deps),we(l,k,V,Pe))}},be=(s,n)=>{if(c(t.errors,n)&&s.focus)return s.focus(),1},me=async(s,n={})=>{let l,y;const d=Ce(s);if(r.resolver){const o=await le(D(s)?s:d);l=N(o),y=s?!d.some(g=>c(o,g)):l}else s?(y=(await Promise.all(d.map(async o=>{const g=c(i,o);return await P(g&&g._f?{[o]:g}:g)}))).every(Boolean),!(!y&&!t.isValid)&&Z()):y=l=await P(i);return v.state.next({...!Q(s)||b.isValid&&l!==t.isValid?{}:{name:s},...r.resolver||!s?{isValid:l}:{},errors:t.errors}),n.shouldFocus&&!y&&Fe(i,be,s?d:h.mount),y},Ze=s=>{const n={...f.mount?a:u};return D(s)?n:Q(s)?c(n,s):s.map(l=>c(n,l))},et=(s,n)=>({invalid:!!c((n||t).errors,s),isDirty:!!c((n||t).dirtyFields,s),isTouched:!!c((n||t).touchedFields,s),isValidating:!!c((n||t).validatingFields,s),error:c((n||t).errors,s)}),Bt=s=>{s&&Ce(s).forEach(n=>R(t.errors,n)),v.state.next({errors:s?t.errors:{}})},tt=(s,n,l)=>{const y=(c(i,s,{_f:{}})._f||{}).ref,d=c(t.errors,s)||{},{ref:o,message:g,type:V,...k}=d;A(t.errors,s,{...k,...n,ref:y}),v.state.next({name:s,errors:t.errors,isValid:!1}),l&&l.shouldFocus&&y&&y.focus&&y.focus()},jt=(s,n)=>se(s)?v.values.subscribe({next:l=>s(x(void 0,n),l)}):x(s,n,!0),je=(s,n={})=>{for(const l of s?Ce(s):h.mount)h.mount.delete(l),h.array.delete(l),n.keepValue||(R(i,l),R(a,l)),!n.keepError&&R(t.errors,l),!n.keepDirty&&R(t.dirtyFields,l),!n.keepTouched&&R(t.touchedFields,l),!n.keepIsValidating&&R(t.validatingFields,l),!r.shouldUnregister&&!n.keepDefaultValue&&R(u,l);v.values.next({values:{...a}}),v.state.next({...t,...n.keepDirty?{isDirty:m()}:{}}),!n.keepIsValid&&Z()},rt=({disabled:s,name:n,field:l,fields:y,value:d})=>{if(G(s)&&f.mount||s){const o=s?void 0:D(d)?Ke(l?l._f:c(y,n)._f):d;A(a,n,o),ue(n,o,!1,!1,!0)}},Ie=(s,n={})=>{let l=c(i,s);const y=G(n.disabled);return A(i,s,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:s}},name:s,mount:!0,...n}}),h.mount.add(s),l?rt({field:l,disabled:n.disabled,name:s,value:n.value}):C(s,!0,n.value),{...y?{disabled:n.disabled}:{},...r.progressive?{required:!!n.required,min:Ve(n.min),max:Ve(n.max),minLength:Ve(n.minLength),maxLength:Ve(n.maxLength),pattern:Ve(n.pattern)}:{},name:s,onChange:ve,onBlur:ve,ref:d=>{if(d){Ie(s,n),l=c(i,s);const o=D(d.value)&&d.querySelectorAll&&d.querySelectorAll("input,select,textarea")[0]||d,g=dr(o),V=l._f.refs||[];if(g?V.find(k=>k===o):o===l._f.ref)return;A(i,s,{_f:{...l._f,...g?{refs:[...V.filter(He),o,...Array.isArray(c(u,s))?[{}]:[]],ref:{type:o.type,name:s}}:{ref:o}}}),C(s,!1,void 0,o)}else l=c(i,s,{}),l._f&&(l._f.mount=!1),(r.shouldUnregister||n.shouldUnregister)&&!(St(h.array,s)&&f.action)&&h.unMount.add(s)}}},st=()=>r.shouldFocusError&&Fe(i,be,h.mount),It=s=>{G(s)&&(v.state.next({disabled:s}),Fe(i,(n,l)=>{const y=c(i,l);y&&(n.disabled=y._f.disabled||s,Array.isArray(y._f.refs)&&y._f.refs.forEach(d=>{d.disabled=y._f.disabled||s}))},0,!1))},it=(s,n)=>async l=>{let y;l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let d=B(a);if(v.state.next({isSubmitting:!0}),r.resolver){const{errors:o,values:g}=await ie();t.errors=o,d=g}else await P(i);if(R(t.errors,"root"),N(t.errors)){v.state.next({errors:{}});try{await s(d,l)}catch(o){y=o}}else n&&await n({...t.errors},l),st(),setTimeout(st);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:N(t.errors)&&!y,submitCount:t.submitCount+1,errors:t.errors}),y)throw y},Nt=(s,n={})=>{c(i,s)&&(D(n.defaultValue)?W(s,B(c(u,s))):(W(s,n.defaultValue),A(u,s,B(n.defaultValue))),n.keepTouched||R(t.touchedFields,s),n.keepDirty||(R(t.dirtyFields,s),t.isDirty=n.defaultValue?m(s,B(c(u,s))):m()),n.keepError||(R(t.errors,s),b.isValid&&Z()),v.state.next({...t}))},nt=(s,n={})=>{const l=s?B(s):u,y=B(l),d=N(s),o=d?u:y;if(n.keepDefaultValues||(u=l),!n.keepValues){if(n.keepDirtyValues)for(const g of h.mount)c(t.dirtyFields,g)?A(o,g,c(a,g)):W(g,c(o,g));else{if(Ge&&D(s))for(const g of h.mount){const V=c(i,g);if(V&&V._f){const k=Array.isArray(V._f.refs)?V._f.refs[0]:V._f.ref;if(Te(k)){const I=k.closest("form");if(I){I.reset();break}}}}i={}}a=e.shouldUnregister?n.keepDefaultValues?B(u):{}:B(o),v.array.next({values:{...o}}),v.values.next({values:{...o}})}h={mount:n.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},f.mount=!b.isValid||!!n.keepIsValid||!!n.keepDirtyValues,f.watch=!!e.shouldUnregister,v.state.next({submitCount:n.keepSubmitCount?t.submitCount:0,isDirty:d?!1:n.keepDirty?t.isDirty:!!(n.keepDefaultValues&&!ae(s,u)),isSubmitted:n.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:d?[]:n.keepDirtyValues?n.keepDefaultValues&&a?Ee(u,a):t.dirtyFields:n.keepDefaultValues&&s?Ee(u,s):{},touchedFields:n.keepTouched?t.touchedFields:{},errors:n.keepErrors?t.errors:{},isSubmitSuccessful:n.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},at=(s,n)=>nt(se(s)?s(a):s,n);return{control:{register:Ie,unregister:je,getFieldState:et,handleSubmit:it,setError:tt,_executeSchema:ie,_getWatch:x,_getDirty:m,_updateValid:Z,_removeUnmounted:De,_updateFieldArray:_,_updateDisabledField:rt,_getFieldArray:O,_reset:nt,_resetDefaultValues:()=>se(r.defaultValues)&&r.defaultValues().then(s=>{at(s,r.resetOptions),v.state.next({isLoading:!1})}),_updateFormState:s=>{t={...t,...s}},_disableForm:It,_subjects:v,_proxyFormState:b,_setErrors:J,get _fields(){return i},get _formValues(){return a},get _state(){return f},set _state(s){f=s},get _defaultValues(){return u},get _names(){return h},set _names(s){h=s},get _formState(){return t},set _formState(s){t=s},get _options(){return r},set _options(s){r={...r,...s}}},trigger:me,register:Ie,handleSubmit:it,watch:jt,setValue:W,getValues:Ze,reset:at,resetField:Nt,clearErrors:Bt,unregister:je,setError:tt,setFocus:(s,n={})=>{const l=c(i,s),y=l&&l._f;if(y){const d=y.refs?y.refs[0]:y.ref;d.focus&&(d.focus(),n.shouldSelect&&d.select())}},getFieldState:et}}function _r(e={}){const r=p.useRef(),t=p.useRef(),[i,u]=p.useState({isDirty:!1,isValidating:!1,isLoading:se(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:se(e.defaultValues)?void 0:e.defaultValues});r.current||(r.current={...mr(e),formState:i});const a=r.current.control;return a._options=e,Je({subject:a._subjects.state,next:f=>{Et(f,a._proxyFormState,a._updateFormState,!0)&&u({...a._formState})}}),p.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),p.useEffect(()=>{if(a._proxyFormState.isDirty){const f=a._getDirty();f!==i.isDirty&&a._subjects.state.next({isDirty:f})}},[a,i.isDirty]),p.useEffect(()=>{e.values&&!ae(e.values,t.current)?(a._reset(e.values,a._options.resetOptions),t.current=e.values,u(f=>({...f}))):a._resetDefaultValues()},[e.values,a]),p.useEffect(()=>{e.errors&&a._setErrors(e.errors)},[e.errors,a]),p.useEffect(()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),p.useEffect(()=>{e.shouldUnregister&&a._subjects.values.next({values:a._getWatch()})},[e.shouldUnregister,a]),r.current.formState=Dt(i,a),r.current}const xr=()=>{const e=Ft();return er({mutationFn:Xt,onSuccess:()=>{e.invalidateQueries({queryKey:["assignments"]})}})},Rr=()=>{const{data:e=[]}=Yt(),{mutate:r}=xr(),{register:t,control:i,handleSubmit:u}=_r();return E.jsxs(E.Fragment,{children:[E.jsx(Gt,{variant:"h4",color:"primary",children:"Lägg till uppdrag"}),E.jsx(ct,{sx:{my:1}}),E.jsxs("form",{onSubmit:u(a=>r(a)),children:[E.jsxs(de,{container:!0,spacing:3,children:[E.jsx(de,{item:!0,xs:12,sm:6,children:E.jsx(xe,{fullWidth:!0,label:"Uppdragsnamn",type:"text",margin:"none",...t("assignmentName")})}),E.jsx(de,{item:!0,xs:12,sm:6,children:E.jsx(ur,{name:"responsiblePersonId",control:i,render:({field:a})=>E.jsx(ft,{options:e,getOptionKey:f=>f.contactId,getOptionLabel:f=>`${f.firstName} ${f.lastName}`,onChange:(f,h)=>a.onChange(h?h.contactId:void 0),renderInput:f=>E.jsx(xe,{...f,label:"Uppdragsgivare",variant:"outlined",fullWidth:!0})})})}),E.jsx(de,{item:!0,xs:12,sm:6,children:E.jsx(ft,{multiple:!0,options:Vr,renderInput:a=>E.jsx(xe,{...a,label:"Fastigheter",type:"text",...t("relevantFiles")}),limitTags:2,disableCloseOnSelect:!0})}),E.jsx(de,{item:!0,xs:12,sm:6,children:E.jsx(xe,{fullWidth:!0,label:"Status",margin:"none",type:"text",...t("status")})}),E.jsx(de,{item:!0,xs:12,sm:6,children:E.jsx(xe,{fullWidth:!0,label:"Arvode",margin:"none",type:"text",...t("fee")})})]}),E.jsx(ct,{sx:{mt:3},children:E.jsx(Qt,{disableElevation:!0,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Spara"})})]})]})},Vr=[{label:"Företaget"},{label:"BRF Sjöstadshöjden"},{label:"Bil & Bostad AB"},{label:"Hemfosa Fastigheter AB"},{label:"Svenska Bostäder"},{label:"Wallenstam AB"},{label:"Skanska"},{label:"JM AB"}];export{Rr as default};
