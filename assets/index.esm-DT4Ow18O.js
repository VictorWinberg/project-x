var Ie=(e,r,t)=>{if(!r.has(e))throw TypeError("Cannot "+t)};var D=(e,r,t)=>(Ie(e,r,"read from private field"),t?t.call(e):r.get(e)),ie=(e,r,t)=>{if(r.has(e))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(e):r.set(e,t)},oe=(e,r,t,i)=>(Ie(e,r,"write to private field"),i?i.call(e,t):r.set(e,t),t);var fe=(e,r,t)=>(Ie(e,r,"access private method"),t);import{k as Pt,s as It,y as at,z as Nt,w as vt,g as qt,x as be,R as w}from"./index-lRiYfU2-.js";import{n as Wt,s as Ht}from"./utils-km2FGkQ4.js";var ee,te,B,X,ye,Ee,Fe,He,gt,jt=(gt=class extends Pt{constructor(r,t){super();ie(this,ye);ie(this,Fe);ie(this,ee,void 0);ie(this,te,void 0);ie(this,B,void 0);ie(this,X,void 0);oe(this,ee,r),this.setOptions(t),this.bindMethods(),fe(this,ye,Ee).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var i;const t=this.options;this.options=D(this,ee).defaultMutationOptions(r),It(this.options,t)||D(this,ee).getMutationCache().notify({type:"observerOptionsUpdated",mutation:D(this,B),observer:this}),t!=null&&t.mutationKey&&this.options.mutationKey&&at(t.mutationKey)!==at(this.options.mutationKey)?this.reset():((i=D(this,B))==null?void 0:i.state.status)==="pending"&&D(this,B).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=D(this,B))==null||r.removeObserver(this)}onMutationUpdate(r){fe(this,ye,Ee).call(this),fe(this,Fe,He).call(this,r)}getCurrentResult(){return D(this,te)}reset(){var r;(r=D(this,B))==null||r.removeObserver(this),oe(this,B,void 0),fe(this,ye,Ee).call(this),fe(this,Fe,He).call(this)}mutate(r,t){var i;return oe(this,X,t),(i=D(this,B))==null||i.removeObserver(this),oe(this,B,D(this,ee).getMutationCache().build(D(this,ee),this.options)),D(this,B).addObserver(this),D(this,B).execute(r)}},ee=new WeakMap,te=new WeakMap,B=new WeakMap,X=new WeakMap,ye=new WeakSet,Ee=function(){var t;const r=((t=D(this,B))==null?void 0:t.state)??Nt();oe(this,te,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Fe=new WeakSet,He=function(r){vt.batch(()=>{var t,i,a,n,y,h,x,E;if(D(this,X)&&this.hasListeners()){const b=D(this,te).variables,v=D(this,te).context;(r==null?void 0:r.type)==="success"?((i=(t=D(this,X)).onSuccess)==null||i.call(t,r.data,b,v),(n=(a=D(this,X)).onSettled)==null||n.call(a,r.data,null,b,v)):(r==null?void 0:r.type)==="error"&&((h=(y=D(this,X)).onError)==null||h.call(y,r.error,b,v),(E=(x=D(this,X)).onSettled)==null||E.call(x,void 0,r.error,b,v))}this.listeners.forEach(b=>{b(D(this,te))})})},gt);function hr(e,r){const t=qt(),[i]=be.useState(()=>new jt(t,e));be.useEffect(()=>{i.setOptions(e)},[i,e]);const a=be.useSyncExternalStore(be.useCallback(y=>i.subscribe(vt.batchCalls(y)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),n=be.useCallback((y,h)=>{i.mutate(y,h).catch(Wt)},[i]);if(a.error&&Ht(i.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:n,mutateAsync:a.mutate}}var me=e=>e.type==="checkbox",de=e=>e instanceof Date,U=e=>e==null;const bt=e=>typeof e=="object";var R=e=>!U(e)&&!Array.isArray(e)&&bt(e)&&!de(e),_t=e=>R(e)&&e.target?me(e.target)?e.target.checked:e.target.value:e,Kt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Vt=(e,r)=>e.has(Kt(r)),$t=e=>{const r=e.constructor&&e.constructor.prototype;return R(r)&&r.hasOwnProperty("isPrototypeOf")},je=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function M(e){let r;const t=Array.isArray(e);if(e instanceof Date)r=new Date(e);else if(e instanceof Set)r=new Set(e);else if(!(je&&(e instanceof Blob||e instanceof FileList))&&(t||R(e)))if(r=t?[]:{},!t&&!$t(e))r=e;else for(const i in e)e.hasOwnProperty(i)&&(r[i]=M(e[i]));else return e;return r}var xe=e=>Array.isArray(e)?e.filter(Boolean):[],S=e=>e===void 0,f=(e,r,t)=>{if(!r||!R(e))return t;const i=xe(r.split(/[,[\].]+?/)).reduce((a,n)=>U(a)?a:a[n],e);return S(i)||i===e?S(e[r])?t:e[r]:i},$=e=>typeof e=="boolean",Ke=e=>/^\w*$/.test(e),Ft=e=>xe(e.replace(/["|']|\]/g,"").split(/\.|\[/)),A=(e,r,t)=>{let i=-1;const a=Ke(r)?[r]:Ft(r),n=a.length,y=n-1;for(;++i<n;){const h=a[i];let x=t;if(i!==y){const E=e[h];x=R(E)||Array.isArray(E)?E:isNaN(+a[i+1])?{}:[]}if(h==="__proto__")return;e[h]=x,e=e[h]}return e};const pe={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},j={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},J={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},zt=w.createContext(null),$e=()=>w.useContext(zt);var mt=(e,r,t,i=!0)=>{const a={defaultValues:r._defaultValues};for(const n in e)Object.defineProperty(a,n,{get:()=>{const y=n;return r._proxyFormState[y]!==j.all&&(r._proxyFormState[y]=!i||j.all),t&&(t[y]=!0),e[y]}});return a},I=e=>R(e)&&!Object.keys(e).length,xt=(e,r,t,i)=>{t(e);const{name:a,...n}=e;return I(n)||Object.keys(n).length>=Object.keys(r).length||Object.keys(n).find(y=>r[y]===(!i||j.all))},Se=e=>Array.isArray(e)?e:[e],At=(e,r,t)=>!e||!r||e===r||Se(e).some(i=>i&&(t?i===r:i.startsWith(r)||r.startsWith(i)));function ze(e){const r=w.useRef(e);r.current=e,w.useEffect(()=>{const t=!e.disabled&&r.current.subject&&r.current.subject.subscribe({next:r.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}function Gt(e){const r=$e(),{control:t=r.control,disabled:i,name:a,exact:n}=e||{},[y,h]=w.useState(t._formState),x=w.useRef(!0),E=w.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),b=w.useRef(a);return b.current=a,ze({disabled:i,next:v=>x.current&&At(b.current,v.name,n)&&xt(v,E.current,t._updateFormState)&&h({...t._formState,...v}),subject:t._subjects.state}),w.useEffect(()=>(x.current=!0,E.current.isValid&&t._updateValid(!0),()=>{x.current=!1}),[t]),mt(y,t,E.current,!1)}var z=e=>typeof e=="string",wt=(e,r,t,i,a)=>z(e)?(i&&r.watch.add(e),f(t,e,a)):Array.isArray(e)?e.map(n=>(i&&r.watch.add(n),f(t,n))):(i&&(r.watchAll=!0),t);function Qt(e){const r=$e(),{control:t=r.control,name:i,defaultValue:a,disabled:n,exact:y}=e||{},h=w.useRef(i);h.current=i,ze({disabled:n,subject:t._subjects.values,next:b=>{At(h.current,b.name,y)&&E(M(wt(h.current,t._names,b.values||t._formValues,!1,a)))}});const[x,E]=w.useState(t._getWatch(i,a));return w.useEffect(()=>t._removeUnmounted()),x}function Jt(e){const r=$e(),{name:t,disabled:i,control:a=r.control,shouldUnregister:n}=e,y=Vt(a._names.array,t),h=Qt({control:a,name:t,defaultValue:f(a._formValues,t,f(a._defaultValues,t,e.defaultValue)),exact:!0}),x=Gt({control:a,name:t}),E=w.useRef(a.register(t,{...e.rules,value:h,...$(e.disabled)?{disabled:e.disabled}:{}}));return w.useEffect(()=>{const b=a._options.shouldUnregister||n,v=(W,K)=>{const L=f(a._fields,W);L&&(L._f.mount=K)};if(v(t,!0),b){const W=M(f(a._options.defaultValues,t));A(a._defaultValues,t,W),S(f(a._formValues,t))&&A(a._formValues,t,W)}return()=>{(y?b&&!a._state.action:b)?a.unregister(t):v(t,!1)}},[t,a,y,n]),w.useEffect(()=>{f(a._fields,t)&&a._updateDisabledField({disabled:i,fields:a._fields,name:t,value:f(a._fields,t)._f.value})},[i,t,a]),{field:{name:t,value:h,...$(i)||x.disabled?{disabled:x.disabled||i}:{},onChange:w.useCallback(b=>E.current.onChange({target:{value:_t(b),name:t},type:pe.CHANGE}),[t]),onBlur:w.useCallback(()=>E.current.onBlur({target:{value:f(a._formValues,t),name:t},type:pe.BLUR}),[t,a]),ref:b=>{const v=f(a._fields,t);v&&b&&(v._f.ref={focus:()=>b.focus(),select:()=>b.select(),setCustomValidity:W=>b.setCustomValidity(W),reportValidity:()=>b.reportValidity()})}},formState:x,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!f(x.errors,t)},isDirty:{enumerable:!0,get:()=>!!f(x.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!f(x.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!f(x.validatingFields,t)},error:{enumerable:!0,get:()=>f(x.errors,t)}})}}const gr=e=>e.render(Jt(e));var Xt=(e,r,t,i,a)=>r?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[i]:a||!0}}:{},nt=e=>({isOnSubmit:!e||e===j.onSubmit,isOnBlur:e===j.onBlur,isOnChange:e===j.onChange,isOnAll:e===j.all,isOnTouch:e===j.onTouched}),lt=(e,r,t)=>!t&&(r.watchAll||r.watch.has(e)||[...r.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const Ve=(e,r,t,i)=>{for(const a of t||Object.keys(e)){const n=f(e,a);if(n){const{_f:y,...h}=n;if(y){if(y.refs&&y.refs[0]&&r(y.refs[0],a)&&!i)break;if(y.ref&&r(y.ref,y.name)&&!i)break;Ve(h,r)}else R(h)&&Ve(h,r)}}};var Yt=(e,r,t)=>{const i=xe(f(e,t));return A(i,"root",r[t]),A(e,t,i),e},Ge=e=>e.type==="file",re=e=>typeof e=="function",Ce=e=>{if(!je)return!1;const r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},ke=e=>z(e),Qe=e=>e.type==="radio",Oe=e=>e instanceof RegExp;const ot={value:!1,isValid:!1},ft={value:!0,isValid:!0};var Dt=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!S(e[0].attributes.value)?S(e[0].value)||e[0].value===""?ft:{value:e[0].value,isValid:!0}:ft:ot}return ot};const ct={isValid:!1,value:null};var Et=e=>Array.isArray(e)?e.reduce((r,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:r,ct):ct;function dt(e,r,t="validate"){if(ke(e)||Array.isArray(e)&&e.every(ke)||$(e)&&!e)return{type:t,message:ke(e)?e:"",ref:r}}var ce=e=>R(e)&&!Oe(e)?e:{value:e,message:""},yt=async(e,r,t,i,a)=>{const{ref:n,refs:y,required:h,maxLength:x,minLength:E,min:b,max:v,pattern:W,validate:K,name:L,valueAsNumber:Te,mount:Y,disabled:Z}=e._f,V=f(r,L);if(!Y||Z)return{};const G=y?y[0]:n,Q=_=>{i&&G.reportValidity&&(G.setCustomValidity($(_)?"":_||""),G.reportValidity())},p={},ae=Qe(n),Ae=me(n),se=ae||Ae,ne=(Te||Ge(n))&&S(n.value)&&S(V)||Ce(n)&&n.value===""||V===""||Array.isArray(V)&&!V.length,N=Xt.bind(null,L,t,p),we=(_,F,C,T=J.maxLength,H=J.minLength)=>{const q=_?F:C;p[L]={type:_?T:H,message:q,ref:n,...N(_?T:H,q)}};if(a?!Array.isArray(V)||!V.length:h&&(!se&&(ne||U(V))||$(V)&&!V||Ae&&!Dt(y).isValid||ae&&!Et(y).isValid)){const{value:_,message:F}=ke(h)?{value:!!h,message:h}:ce(h);if(_&&(p[L]={type:J.required,message:F,ref:G,...N(J.required,F)},!t))return Q(F),p}if(!ne&&(!U(b)||!U(v))){let _,F;const C=ce(v),T=ce(b);if(!U(V)&&!isNaN(V)){const H=n.valueAsNumber||V&&+V;U(C.value)||(_=H>C.value),U(T.value)||(F=H<T.value)}else{const H=n.valueAsDate||new Date(V),q=ve=>new Date(new Date().toDateString()+" "+ve),he=n.type=="time",ge=n.type=="week";z(C.value)&&V&&(_=he?q(V)>q(C.value):ge?V>C.value:H>new Date(C.value)),z(T.value)&&V&&(F=he?q(V)<q(T.value):ge?V<T.value:H<new Date(T.value))}if((_||F)&&(we(!!_,C.message,T.message,J.max,J.min),!t))return Q(p[L].message),p}if((x||E)&&!ne&&(z(V)||a&&Array.isArray(V))){const _=ce(x),F=ce(E),C=!U(_.value)&&V.length>+_.value,T=!U(F.value)&&V.length<+F.value;if((C||T)&&(we(C,_.message,F.message),!t))return Q(p[L].message),p}if(W&&!ne&&z(V)){const{value:_,message:F}=ce(W);if(Oe(_)&&!V.match(_)&&(p[L]={type:J.pattern,message:F,ref:n,...N(J.pattern,F)},!t))return Q(F),p}if(K){if(re(K)){const _=await K(V,r),F=dt(_,G);if(F&&(p[L]={...F,...N(J.validate,F.message)},!t))return Q(F.message),p}else if(R(K)){let _={};for(const F in K){if(!I(_)&&!t)break;const C=dt(await K[F](V,r),G,F);C&&(_={...C,...N(F,C.message)},Q(C.message),t&&(p[L]=_))}if(!I(_)&&(p[L]={ref:G,..._},!t))return p}}return Q(!0),p};function Zt(e,r){const t=r.slice(0,-1).length;let i=0;for(;i<t;)e=S(e)?i++:e[r[i++]];return e}function er(e){for(const r in e)if(e.hasOwnProperty(r)&&!S(e[r]))return!1;return!0}function O(e,r){const t=Array.isArray(r)?r:Ke(r)?[r]:Ft(r),i=t.length===1?e:Zt(e,t),a=t.length-1,n=t[a];return i&&delete i[n],a!==0&&(R(i)&&I(i)||Array.isArray(i)&&er(i))&&O(e,t.slice(0,-1)),e}var Ne=()=>{let e=[];return{get observers(){return e},next:a=>{for(const n of e)n.next&&n.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(n=>n!==a)}}),unsubscribe:()=>{e=[]}}},Re=e=>U(e)||!bt(e);function ue(e,r){if(Re(e)||Re(r))return e===r;if(de(e)&&de(r))return e.getTime()===r.getTime();const t=Object.keys(e),i=Object.keys(r);if(t.length!==i.length)return!1;for(const a of t){const n=e[a];if(!i.includes(a))return!1;if(a!=="ref"){const y=r[a];if(de(n)&&de(y)||R(n)&&R(y)||Array.isArray(n)&&Array.isArray(y)?!ue(n,y):n!==y)return!1}}return!0}var St=e=>e.type==="select-multiple",tr=e=>Qe(e)||me(e),qe=e=>Ce(e)&&e.isConnected,kt=e=>{for(const r in e)if(re(e[r]))return!0;return!1};function Le(e,r={}){const t=Array.isArray(e);if(R(e)||t)for(const i in e)Array.isArray(e[i])||R(e[i])&&!kt(e[i])?(r[i]=Array.isArray(e[i])?[]:{},Le(e[i],r[i])):U(e[i])||(r[i]=!0);return r}function pt(e,r,t){const i=Array.isArray(e);if(R(e)||i)for(const a in e)Array.isArray(e[a])||R(e[a])&&!kt(e[a])?S(r)||Re(t[a])?t[a]=Array.isArray(e[a])?Le(e[a],[]):{...Le(e[a])}:pt(e[a],U(r)?{}:r[a],t[a]):t[a]=!ue(e[a],r[a]);return t}var De=(e,r)=>pt(e,r,Le(r)),Ct=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:i})=>S(e)?e:r?e===""?NaN:e&&+e:t&&z(e)?new Date(e):i?i(e):e;function We(e){const r=e.ref;if(!(e.refs?e.refs.every(t=>t.disabled):r.disabled))return Ge(r)?r.files:Qe(r)?Et(e.refs).value:St(r)?[...r.selectedOptions].map(({value:t})=>t):me(r)?Dt(e.refs).value:Ct(S(r.value)?e.ref.value:r.value,e)}var rr=(e,r,t,i)=>{const a={};for(const n of e){const y=f(r,n);y&&A(a,n,y._f)}return{criteriaMode:t,names:[...e],fields:a,shouldUseNativeValidation:i}},_e=e=>S(e)?e:Oe(e)?e.source:R(e)?Oe(e.value)?e.value.source:e.value:e,sr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function ht(e,r,t){const i=f(e,t);if(i||Ke(t))return{error:i,name:t};const a=t.split(".");for(;a.length;){const n=a.join("."),y=f(r,n),h=f(e,n);if(y&&!Array.isArray(y)&&t!==n)return{name:t};if(h&&h.type)return{name:n,error:h};a.pop()}return{name:t}}var ir=(e,r,t,i,a)=>a.isOnAll?!1:!t&&a.isOnTouch?!(r||e):(t?i.isOnBlur:a.isOnBlur)?!e:(t?i.isOnChange:a.isOnChange)?e:!0,ur=(e,r)=>!xe(f(e,r)).length&&O(e,r);const ar={mode:j.onSubmit,reValidateMode:j.onChange,shouldFocusError:!0};function nr(e={}){let r={...ar,...e},t={submitCount:0,isDirty:!1,isLoading:re(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},i={},a=R(r.defaultValues)||R(r.values)?M(r.defaultValues||r.values)||{}:{},n=r.shouldUnregister?{}:M(a),y={action:!1,mount:!1,watch:!1},h={mount:new Set,unMount:new Set,array:new Set,watch:new Set},x,E=0;const b={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},v={values:Ne(),array:Ne(),state:Ne()},W=nt(r.mode),K=nt(r.reValidateMode),L=r.criteriaMode===j.all,Te=s=>u=>{clearTimeout(E),E=setTimeout(s,u)},Y=async s=>{if(b.isValid||s){const u=r.resolver?I((await se()).errors):await N(i,!0);u!==t.isValid&&v.state.next({isValid:u})}},Z=(s,u)=>{(b.isValidating||b.validatingFields)&&((s||Array.from(h.mount)).forEach(l=>{l&&(u?A(t.validatingFields,l,u):O(t.validatingFields,l))}),v.state.next({validatingFields:t.validatingFields,isValidating:!I(t.validatingFields)}))},V=(s,u=[],l,d,c=!0,o=!0)=>{if(d&&l){if(y.action=!0,o&&Array.isArray(f(i,s))){const g=l(f(i,s),d.argA,d.argB);c&&A(i,s,g)}if(o&&Array.isArray(f(t.errors,s))){const g=l(f(t.errors,s),d.argA,d.argB);c&&A(t.errors,s,g),ur(t.errors,s)}if(b.touchedFields&&o&&Array.isArray(f(t.touchedFields,s))){const g=l(f(t.touchedFields,s),d.argA,d.argB);c&&A(t.touchedFields,s,g)}b.dirtyFields&&(t.dirtyFields=De(a,n)),v.state.next({name:s,isDirty:_(s,u),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else A(n,s,u)},G=(s,u)=>{A(t.errors,s,u),v.state.next({errors:t.errors})},Q=s=>{t.errors=s,v.state.next({errors:t.errors,isValid:!1})},p=(s,u,l,d)=>{const c=f(i,s);if(c){const o=f(n,s,S(l)?f(a,s):l);S(o)||d&&d.defaultChecked||u?A(n,s,u?o:We(c._f)):T(s,o),y.mount&&Y()}},ae=(s,u,l,d,c)=>{let o=!1,g=!1;const m={name:s},k=!!(f(i,s)&&f(i,s)._f.disabled);if(!l||d){b.isDirty&&(g=t.isDirty,t.isDirty=m.isDirty=_(),o=g!==m.isDirty);const P=k||ue(f(a,s),u);g=!!(!k&&f(t.dirtyFields,s)),P||k?O(t.dirtyFields,s):A(t.dirtyFields,s,!0),m.dirtyFields=t.dirtyFields,o=o||b.dirtyFields&&g!==!P}if(l){const P=f(t.touchedFields,s);P||(A(t.touchedFields,s,l),m.touchedFields=t.touchedFields,o=o||b.touchedFields&&P!==l)}return o&&c&&v.state.next(m),o?m:{}},Ae=(s,u,l,d)=>{const c=f(t.errors,s),o=b.isValid&&$(u)&&t.isValid!==u;if(e.delayError&&l?(x=Te(()=>G(s,l)),x(e.delayError)):(clearTimeout(E),x=null,l?A(t.errors,s,l):O(t.errors,s)),(l?!ue(c,l):c)||!I(d)||o){const g={...d,...o&&$(u)?{isValid:u}:{},errors:t.errors,name:s};t={...t,...g},v.state.next(g)}},se=async s=>{Z(s,!0);const u=await r.resolver(n,r.context,rr(s||h.mount,i,r.criteriaMode,r.shouldUseNativeValidation));return Z(s),u},ne=async s=>{const{errors:u}=await se(s);if(s)for(const l of s){const d=f(u,l);d?A(t.errors,l,d):O(t.errors,l)}else t.errors=u;return u},N=async(s,u,l={valid:!0})=>{for(const d in s){const c=s[d];if(c){const{_f:o,...g}=c;if(o){const m=h.array.has(o.name);Z([d],!0);const k=await yt(c,n,L,r.shouldUseNativeValidation&&!u,m);if(Z([d]),k[o.name]&&(l.valid=!1,u))break;!u&&(f(k,o.name)?m?Yt(t.errors,k,o.name):A(t.errors,o.name,k[o.name]):O(t.errors,o.name))}g&&await N(g,u,l)}}return l.valid},we=()=>{for(const s of h.unMount){const u=f(i,s);u&&(u._f.refs?u._f.refs.every(l=>!qe(l)):!qe(u._f.ref))&&Ue(s)}h.unMount=new Set},_=(s,u)=>(s&&u&&A(n,s,u),!ue(Je(),a)),F=(s,u,l)=>wt(s,h,{...y.mount?n:S(u)?a:z(s)?{[s]:u}:u},l,u),C=s=>xe(f(y.mount?n:a,s,e.shouldUnregister?f(a,s,[]):[])),T=(s,u,l={})=>{const d=f(i,s);let c=u;if(d){const o=d._f;o&&(!o.disabled&&A(n,s,Ct(u,o)),c=Ce(o.ref)&&U(u)?"":u,St(o.ref)?[...o.ref.options].forEach(g=>g.selected=c.includes(g.value)):o.refs?me(o.ref)?o.refs.length>1?o.refs.forEach(g=>(!g.defaultChecked||!g.disabled)&&(g.checked=Array.isArray(c)?!!c.find(m=>m===g.value):c===g.value)):o.refs[0]&&(o.refs[0].checked=!!c):o.refs.forEach(g=>g.checked=g.value===c):Ge(o.ref)?o.ref.value="":(o.ref.value=c,o.ref.type||v.values.next({name:s,values:{...n}})))}(l.shouldDirty||l.shouldTouch)&&ae(s,c,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&ve(s)},H=(s,u,l)=>{for(const d in u){const c=u[d],o=`${s}.${d}`,g=f(i,o);(h.array.has(s)||!Re(c)||g&&!g._f)&&!de(c)?H(o,c,l):T(o,c,l)}},q=(s,u,l={})=>{const d=f(i,s),c=h.array.has(s),o=M(u);A(n,s,o),c?(v.array.next({name:s,values:{...n}}),(b.isDirty||b.dirtyFields)&&l.shouldDirty&&v.state.next({name:s,dirtyFields:De(a,n),isDirty:_(s,o)})):d&&!d._f&&!U(o)?H(s,o,l):T(s,o,l),lt(s,h)&&v.state.next({...t}),v.values.next({name:y.mount?s:void 0,values:{...n}})},he=async s=>{y.mount=!0;const u=s.target;let l=u.name,d=!0;const c=f(i,l),o=()=>u.type?We(c._f):_t(s),g=m=>{d=Number.isNaN(m)||m===f(n,l,m)};if(c){let m,k;const P=o(),le=s.type===pe.BLUR||s.type===pe.FOCUS_OUT,Ut=!sr(c._f)&&!r.resolver&&!f(t.errors,l)&&!c._f.deps||ir(le,f(t.touchedFields,l),t.isSubmitted,K,W),Be=lt(l,h,le);A(n,l,P),le?(c._f.onBlur&&c._f.onBlur(s),x&&x(0)):c._f.onChange&&c._f.onChange(s);const Pe=ae(l,P,le,!1),Mt=!I(Pe)||Be;if(!le&&v.values.next({name:l,type:s.type,values:{...n}}),Ut)return b.isValid&&Y(),Mt&&v.state.next({name:l,...Be?{}:Pe});if(!le&&Be&&v.state.next({...t}),r.resolver){const{errors:it}=await se([l]);if(g(P),d){const Bt=ht(t.errors,i,l),ut=ht(it,i,Bt.name||l);m=ut.error,l=ut.name,k=I(it)}}else Z([l],!0),m=(await yt(c,n,L,r.shouldUseNativeValidation))[l],Z([l]),g(P),d&&(m?k=!1:b.isValid&&(k=await N(i,!0)));d&&(c._f.deps&&ve(c._f.deps),Ae(l,k,m,Pe))}},ge=(s,u)=>{if(f(t.errors,u)&&s.focus)return s.focus(),1},ve=async(s,u={})=>{let l,d;const c=Se(s);if(r.resolver){const o=await ne(S(s)?s:c);l=I(o),d=s?!c.some(g=>f(o,g)):l}else s?(d=(await Promise.all(c.map(async o=>{const g=f(i,o);return await N(g&&g._f?{[o]:g}:g)}))).every(Boolean),!(!d&&!t.isValid)&&Y()):d=l=await N(i);return v.state.next({...!z(s)||b.isValid&&l!==t.isValid?{}:{name:s},...r.resolver||!s?{isValid:l}:{},errors:t.errors}),u.shouldFocus&&!d&&Ve(i,ge,s?c:h.mount),d},Je=s=>{const u={...y.mount?n:a};return S(s)?u:z(s)?f(u,s):s.map(l=>f(u,l))},Xe=(s,u)=>({invalid:!!f((u||t).errors,s),isDirty:!!f((u||t).dirtyFields,s),isTouched:!!f((u||t).touchedFields,s),isValidating:!!f((u||t).validatingFields,s),error:f((u||t).errors,s)}),Ot=s=>{s&&Se(s).forEach(u=>O(t.errors,u)),v.state.next({errors:s?t.errors:{}})},Ye=(s,u,l)=>{const d=(f(i,s,{_f:{}})._f||{}).ref,c=f(t.errors,s)||{},{ref:o,message:g,type:m,...k}=c;A(t.errors,s,{...k,...u,ref:d}),v.state.next({name:s,errors:t.errors,isValid:!1}),l&&l.shouldFocus&&d&&d.focus&&d.focus()},Rt=(s,u)=>re(s)?v.values.subscribe({next:l=>s(F(void 0,u),l)}):F(s,u,!0),Ue=(s,u={})=>{for(const l of s?Se(s):h.mount)h.mount.delete(l),h.array.delete(l),u.keepValue||(O(i,l),O(n,l)),!u.keepError&&O(t.errors,l),!u.keepDirty&&O(t.dirtyFields,l),!u.keepTouched&&O(t.touchedFields,l),!u.keepIsValidating&&O(t.validatingFields,l),!r.shouldUnregister&&!u.keepDefaultValue&&O(a,l);v.values.next({values:{...n}}),v.state.next({...t,...u.keepDirty?{isDirty:_()}:{}}),!u.keepIsValid&&Y()},Ze=({disabled:s,name:u,field:l,fields:d,value:c})=>{if($(s)&&y.mount||s){const o=s?void 0:S(c)?We(l?l._f:f(d,u)._f):c;A(n,u,o),ae(u,o,!1,!1,!0)}},Me=(s,u={})=>{let l=f(i,s);const d=$(u.disabled);return A(i,s,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:s}},name:s,mount:!0,...u}}),h.mount.add(s),l?Ze({field:l,disabled:u.disabled,name:s,value:u.value}):p(s,!0,u.value),{...d?{disabled:u.disabled}:{},...r.progressive?{required:!!u.required,min:_e(u.min),max:_e(u.max),minLength:_e(u.minLength),maxLength:_e(u.maxLength),pattern:_e(u.pattern)}:{},name:s,onChange:he,onBlur:he,ref:c=>{if(c){Me(s,u),l=f(i,s);const o=S(c.value)&&c.querySelectorAll&&c.querySelectorAll("input,select,textarea")[0]||c,g=tr(o),m=l._f.refs||[];if(g?m.find(k=>k===o):o===l._f.ref)return;A(i,s,{_f:{...l._f,...g?{refs:[...m.filter(qe),o,...Array.isArray(f(a,s))?[{}]:[]],ref:{type:o.type,name:s}}:{ref:o}}}),p(s,!1,void 0,o)}else l=f(i,s,{}),l._f&&(l._f.mount=!1),(r.shouldUnregister||u.shouldUnregister)&&!(Vt(h.array,s)&&y.action)&&h.unMount.add(s)}}},et=()=>r.shouldFocusError&&Ve(i,ge,h.mount),Lt=s=>{$(s)&&(v.state.next({disabled:s}),Ve(i,(u,l)=>{const d=f(i,l);d&&(u.disabled=d._f.disabled||s,Array.isArray(d._f.refs)&&d._f.refs.forEach(c=>{c.disabled=d._f.disabled||s}))},0,!1))},tt=(s,u)=>async l=>{let d;l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let c=M(n);if(v.state.next({isSubmitting:!0}),r.resolver){const{errors:o,values:g}=await se();t.errors=o,c=g}else await N(i);if(O(t.errors,"root"),I(t.errors)){v.state.next({errors:{}});try{await s(c,l)}catch(o){d=o}}else u&&await u({...t.errors},l),et(),setTimeout(et);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:I(t.errors)&&!d,submitCount:t.submitCount+1,errors:t.errors}),d)throw d},Tt=(s,u={})=>{f(i,s)&&(S(u.defaultValue)?q(s,M(f(a,s))):(q(s,u.defaultValue),A(a,s,M(u.defaultValue))),u.keepTouched||O(t.touchedFields,s),u.keepDirty||(O(t.dirtyFields,s),t.isDirty=u.defaultValue?_(s,M(f(a,s))):_()),u.keepError||(O(t.errors,s),b.isValid&&Y()),v.state.next({...t}))},rt=(s,u={})=>{const l=s?M(s):a,d=M(l),c=I(s),o=c?a:d;if(u.keepDefaultValues||(a=l),!u.keepValues){if(u.keepDirtyValues)for(const g of h.mount)f(t.dirtyFields,g)?A(o,g,f(n,g)):q(g,f(o,g));else{if(je&&S(s))for(const g of h.mount){const m=f(i,g);if(m&&m._f){const k=Array.isArray(m._f.refs)?m._f.refs[0]:m._f.ref;if(Ce(k)){const P=k.closest("form");if(P){P.reset();break}}}}i={}}n=e.shouldUnregister?u.keepDefaultValues?M(a):{}:M(o),v.array.next({values:{...o}}),v.values.next({values:{...o}})}h={mount:u.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},y.mount=!b.isValid||!!u.keepIsValid||!!u.keepDirtyValues,y.watch=!!e.shouldUnregister,v.state.next({submitCount:u.keepSubmitCount?t.submitCount:0,isDirty:c?!1:u.keepDirty?t.isDirty:!!(u.keepDefaultValues&&!ue(s,a)),isSubmitted:u.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:c?[]:u.keepDirtyValues?u.keepDefaultValues&&n?De(a,n):t.dirtyFields:u.keepDefaultValues&&s?De(a,s):{},touchedFields:u.keepTouched?t.touchedFields:{},errors:u.keepErrors?t.errors:{},isSubmitSuccessful:u.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},st=(s,u)=>rt(re(s)?s(n):s,u);return{control:{register:Me,unregister:Ue,getFieldState:Xe,handleSubmit:tt,setError:Ye,_executeSchema:se,_getWatch:F,_getDirty:_,_updateValid:Y,_removeUnmounted:we,_updateFieldArray:V,_updateDisabledField:Ze,_getFieldArray:C,_reset:rt,_resetDefaultValues:()=>re(r.defaultValues)&&r.defaultValues().then(s=>{st(s,r.resetOptions),v.state.next({isLoading:!1})}),_updateFormState:s=>{t={...t,...s}},_disableForm:Lt,_subjects:v,_proxyFormState:b,_setErrors:Q,get _fields(){return i},get _formValues(){return n},get _state(){return y},set _state(s){y=s},get _defaultValues(){return a},get _names(){return h},set _names(s){h=s},get _formState(){return t},set _formState(s){t=s},get _options(){return r},set _options(s){r={...r,...s}}},trigger:ve,register:Me,handleSubmit:tt,watch:Rt,setValue:q,getValues:Je,reset:st,resetField:Tt,clearErrors:Ot,unregister:Ue,setError:Ye,setFocus:(s,u={})=>{const l=f(i,s),d=l&&l._f;if(d){const c=d.refs?d.refs[0]:d.ref;c.focus&&(c.focus(),u.shouldSelect&&c.select())}},getFieldState:Xe}}function vr(e={}){const r=w.useRef(),t=w.useRef(),[i,a]=w.useState({isDirty:!1,isValidating:!1,isLoading:re(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:re(e.defaultValues)?void 0:e.defaultValues});r.current||(r.current={...nr(e),formState:i});const n=r.current.control;return n._options=e,ze({subject:n._subjects.state,next:y=>{xt(y,n._proxyFormState,n._updateFormState,!0)&&a({...n._formState})}}),w.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),w.useEffect(()=>{if(n._proxyFormState.isDirty){const y=n._getDirty();y!==i.isDirty&&n._subjects.state.next({isDirty:y})}},[n,i.isDirty]),w.useEffect(()=>{e.values&&!ue(e.values,t.current)?(n._reset(e.values,n._options.resetOptions),t.current=e.values,a(y=>({...y}))):n._resetDefaultValues()},[e.values,n]),w.useEffect(()=>{e.errors&&n._setErrors(e.errors)},[e.errors,n]),w.useEffect(()=>{n._state.mount||(n._updateValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),w.useEffect(()=>{e.shouldUnregister&&n._subjects.values.next({values:n._getWatch()})},[e.shouldUnregister,n]),r.current.formState=mt(i,n),r.current}export{gr as C,vr as a,hr as u};
