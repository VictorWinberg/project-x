import{p as c,t as r,e as i}from"./useSnackbar-DxYK_gPc.js";import{m as y,n as g,o as l,q as a,ai as d}from"./index-Ccm8byBe.js";const C=async()=>{const n=await a("SELECT * FROM assignments ORDER BY assignment_name"),s=r(await a("SELECT * FROM contacts"),"contactId"),e=r(await a("SELECT * FROM companies"),"companyId");return n.map(m(s,e))},P=async n=>{const s=await d("assignments",{assignmentId:n}),e=r(await a("SELECT * FROM contacts"),"contactId"),t=r(await a("SELECT * FROM companies"),"companyId");return m(e,t)(s)},w=async n=>await y("assignments",c(n,["assignmentName","responsiblePersonId","externalContactPersonId","relevantFiles","fee","type","status"])),F=async n=>await g("assignments",c(n,["assignmentName","responsiblePersonId","externalContactPersonId","relevantFiles","fee","type","status"]),c(n,["assignmentId"])),b=async({assignmentId:n})=>await l("assignments",{assignmentId:n});function m(n,s){return e=>{const t=n.get(e.responsiblePersonId),p=t&&s.get(t.companyId),o=n.get(e.externalContactPersonId),u=o&&s.get(o.companyId);return{...e,responsiblePerson:t&&{...t,company:p},externalContactPerson:o&&{...o,company:u}}}}const f=()=>i({queryKey:["assignments"],queryFn:C}),A=n=>i({queryKey:["assignment",n],queryFn:()=>P(n),enabled:!!n});export{A as a,F as b,w as c,b as d,f as u};
