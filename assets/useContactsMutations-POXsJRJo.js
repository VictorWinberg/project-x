import{r as C,j as t,B as S,G as a,h as o,m as l}from"./index-BSAVlEUM.js";import{u as g,C as F}from"./index.esm-C_vJEc0t.js";import{u as K}from"./useCompaniesQueries-DkF-oPdi.js";import{A as y}from"./Autocomplete-DglQMvLD.js";import{u,a as m}from"./useSnackbar-B-I2WYU9.js";import{c as q,u as v,d as I}from"./contactsApi-CpS5Fc7x.js";const T=({onSubmit:n=()=>{},onChange:e,formProps:d,children:b,...h})=>{const{data:c=[]}=K(),{register:r,control:j,handleSubmit:k,watch:f}=g(d),p=f();return C.useEffect(()=>{e==null||e(p)},[e,p]),console.log(d,c),t.jsx(S,{...h,children:t.jsxs("form",{onSubmit:k(n),children:[t.jsxs(a,{container:!0,spacing:3,children:[t.jsx(a,{item:!0,xs:12,sm:6,children:t.jsx(o,{fullWidth:!0,label:"Namn",type:"text",margin:"none",...r("contactName")})}),t.jsx(a,{item:!0,xs:12,sm:6,children:t.jsx(o,{fullWidth:!0,label:"Email",type:"text",margin:"none",...r("email")})}),t.jsx(a,{item:!0,xs:12,sm:6,children:t.jsx(o,{fullWidth:!0,label:"Telefonnummer",type:"text",margin:"none",...r("phone")})}),t.jsx(a,{item:!0,xs:12,sm:6,children:t.jsx(F,{name:"companyId",control:j,render:({field:i})=>t.jsx(y,{options:c,getOptionKey:s=>s.companyId,getOptionLabel:s=>s.companyName,value:c.find(s=>s.companyId===i.value)||null,onChange:(s,x)=>i.onChange(x?x.companyId:void 0),renderInput:s=>t.jsx(o,{...s,label:"Bolag",variant:"outlined",fullWidth:!0})})})}),t.jsx(a,{item:!0,xs:12,sm:6,children:t.jsx(o,{fullWidth:!0,label:"Befattning",type:"text",margin:"none",...r("jobTitle")})}),t.jsx(a,{item:!0,xs:12,sm:6,children:t.jsx(y,{multiple:!0,options:U,renderInput:i=>t.jsx(o,{...i,label:"Utskick",name:"dispatch",type:"text"}),limitTags:2,disableCloseOnSelect:!0})})]}),b]})})},U=[{label:"Utskick Syd"},{label:"Utskick Väst"},{label:"Utskick Norr"},{label:"Utskick Öst"}],D=()=>{const n=l(),{showSnackbar:e}=u();return m({mutationFn:q,onSuccess:()=>{n.invalidateQueries({queryKey:["contacts"]}),e("Kontakt skapad!")}})},O=()=>{const n=l(),{showSnackbar:e}=u();return m({mutationFn:v,onSuccess:()=>{n.invalidateQueries({queryKey:["contacts"]}),e("Kontakt uppdaterad!")}})},A=()=>{const n=l(),{showSnackbar:e}=u();return m({mutationFn:I,onSuccess:()=>{n.invalidateQueries({queryKey:["contacts"]}),e("Kontakt borttagen!")}})};export{T as C,O as a,A as b,D as u};
