import{m as v,j as e,l as p,ba as I,bb as D,bc as B,r as S,B as l,f as s,T as i,b as T,d as L,aO as o,bd as z,aP as d,e as q,aN as c,aQ as u,aR as h,aS as x,aT as m,be as w,aj as E}from"./index-CZLJGQJi.js";import{b as O,u as b,a as f}from"./useSnackbar-BPh7QC2u.js";import{T as j}from"./Tooltip-7oHvs7h0.js";const P=v(e.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload"),U=v(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),A=()=>O({queryKey:["files"],queryFn:B}),M=()=>{const n=p(),{showSnackbar:a}=b();return f({mutationFn:I,onSuccess:()=>{n.invalidateQueries({queryKey:["files"]}),a("Dokumentet sparat!")},onError:()=>{a("Ett fel uppstod när dokumentet skulle sparas.","error")}})},Q=()=>{const n=p(),{showSnackbar:a}=b();return f({mutationFn:D,onSuccess:()=>{n.invalidateQueries({queryKey:["files"]}),a("Dokumentet borttaget!")},onError:()=>{a("Ett fel uppstod när dokumentet skulle tas bort.","error")}})},R=()=>{const[n,a]=S.useState(null),{data:y=[]}=A(),{mutate:F}=M(),{mutate:g}=Q(),k=t=>{t.target.files&&a(t.target.files[0])},C=async()=>{n&&(await F(n),a(null))};return e.jsxs(l,{children:[e.jsxs(s,{component:"label",role:void 0,variant:"contained",tabIndex:-1,startIcon:e.jsx(P,{}),children:["Upload file",e.jsx("input",{type:"file",style:{display:"none"},onChange:k})]}),n&&e.jsxs(e.Fragment,{children:[e.jsxs(i,{variant:"body1",sx:{mt:2},children:["Selected File: ",n.name]}),e.jsx(s,{variant:"contained",color:"primary",onClick:C,disabled:!n,children:"Save File"})]}),e.jsxs(l,{mt:4,children:[e.jsx(i,{variant:"h5",children:"Stored Files"}),e.jsx(T,{children:y.map(t=>e.jsxs(L,{disablePadding:!0,children:[e.jsx(o,{variant:"popover",popupId:`download-popup-${t.name}`,children:r=>e.jsxs(e.Fragment,{children:[e.jsx(j,{title:"Download",children:e.jsx(z,{...d(r),children:e.jsx(q,{primary:t.name})})}),e.jsx(c,{...u(r),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:e.jsxs(h,{children:[e.jsx(x,{children:e.jsx(i,{variant:"body1",children:"Vill du ladda ner detta dokument?"})}),e.jsxs(m,{children:[e.jsx(s,{fullWidth:!0,onClick:r.close,color:"inherit",variant:"outlined",children:"Avbryt"}),e.jsx(s,{fullWidth:!0,variant:"contained",href:URL.createObjectURL(t.content),onClick:()=>r.close(),download:t.name,children:"Ladda ner"})]})]})})]})}),e.jsx(w,{children:e.jsx(o,{variant:"popover",popupId:`delete-popup-${t.name}`,children:r=>e.jsxs(e.Fragment,{children:[e.jsx(j,{title:"Delete",children:e.jsx(E,{color:"error",...d(r),children:e.jsx(U,{})})}),e.jsx(c,{...u(r),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:e.jsxs(h,{children:[e.jsx(x,{children:e.jsx(i,{variant:"body1",children:"Är du säker på att du vill ta bort detta dokument?"})}),e.jsxs(m,{children:[e.jsx(s,{fullWidth:!0,onClick:r.close,color:"inherit",variant:"outlined",children:"Avbryt"}),e.jsx(s,{fullWidth:!0,onClick:()=>[g(t.name),r.close()],color:"error",variant:"contained",children:"Ta bort"})]})]})})]})})})]},t.name))})]})]})},V=()=>e.jsxs(e.Fragment,{children:[e.jsx(i,{variant:"h3",gutterBottom:!0,children:"Documents"}),e.jsx(R,{})]});export{V as default};
