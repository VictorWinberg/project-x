import{h as I,i as L,j as a,T as S,B as c,g as s,L as o,S as F,f as i}from"./index-33pNkKs4.js";import{u as K,a as k,b as v}from"./useContactsMutations-DOy9OnQQ.js";import{u as E}from"./useContactsQueries-DwuLm1JB.js";import{C as $}from"./ContentTabs-CPElck0b.js";import{D as m}from"./DataTable-BCDjlAUc.js";import{F as N}from"./FlexGrow-B0s4oLOK.js";import{u as P,a as T,C as D}from"./useCompaniesMutations-B1yjRP1b.js";import{a as U}from"./useCompaniesQueries-CleQgEni.js";import{u as V}from"./useAssignmentsQueries-DAqQ1pK3.js";import"./useSnackbar-BbkumwX-.js";import"./MoreHoriz-BhYN_Q_g.js";import"./VisibilityOff-C-eUuO6L.js";import"./Tooltip-mgI4gTHw.js";import"./index.esm-NCT_UaTN.js";const X=()=>{const l=I(),r=L(),{data:n,isLoading:d}=U(Number(l.id)),{mutate:p}=P(),{mutate:g}=T(),{data:u=[],isLoading:h}=E(),{data:y=[],isLoading:x}=V(),{mutate:C}=K(),{mutate:b}=k(),{mutate:f}=v(),j=e=>{n?g(e):p(e,{onSuccess:t=>r(`/dashboard/companies/${t.companyId}`)})};if(!d)return a.jsxs(a.Fragment,{children:[a.jsx(S,{variant:"h4",color:"primary",children:n?"Redigera företag":"Lägg till företag"}),a.jsx(c,{sx:{my:1}}),a.jsxs(D,{formProps:{values:n},onSubmit:j,children:[a.jsx(c,{sx:{my:1}}),n&&a.jsx(N,{children:a.jsx($,{tabs:[{label:"Interaktioner",content:a.jsx(a.Fragment,{children:"Interaktioner..."})},{label:"Kontakter",content:a.jsx(m,{data:u.filter(e=>e.companyId===n.companyId),getRowId:e=>`${e.contactId}`,state:{isLoading:h},columns:[{accessorKey:"contactName",header:"Namn",Cell:({cell:e,row:t})=>a.jsx(s,{component:o,to:`/dashboard/contacts/${t.original.contactId}`,children:e.getValue()})},{accessorKey:"email",header:"Email"},{accessorKey:"jobTitle",header:"Jobbtitel"},{accessorKey:"phone",header:"Telefonnummer"}],onCreate:e=>C({...e,companyId:n.companyId}),onUpdate:e=>b(e),onDelete:e=>f(e)})},{label:"Söker",content:a.jsx(a.Fragment,{children:"Söker..."})},{label:"Uppdrag",content:a.jsx(m,{data:y.filter(e=>{var t;return((t=e.externalContactPerson)==null?void 0:t.companyId)===n.companyId}),getRowId:e=>`${e.assignmentId}`,state:{isLoading:x},columns:[{accessorKey:"assignmentName",header:"Uppdrag",Cell:({cell:e,row:t})=>a.jsx(s,{component:o,to:`/dashboard/assignments/${t.original.assignmentId}`,children:e.getValue()})},{accessorFn:e=>{var t;return(t=e.responsiblePerson)==null?void 0:t.contactName},header:"Ansvarig",enableEditing:!1,Cell:({cell:e,row:t})=>a.jsx(s,{component:o,to:`/dashboard/contacts/${t.original.responsiblePersonId}`,children:e.getValue()})},{accessorFn:e=>{var t;return(t=e.externalContactPerson)==null?void 0:t.contactName},header:"Extern",enableEditing:!1,Cell:({cell:e,row:t})=>a.jsx(s,{component:o,to:`/dashboard/contacts/${t.original.externalContactPersonId}`,children:e.getValue()})},{accessorKey:"status",header:"Status"},{accessorKey:"fee",header:"Arvode",Cell:({cell:e})=>e.getValue().toLocaleString("sv-SE",{style:"currency",currency:"SEK",minimumFractionDigits:0,maximumFractionDigits:0})}]})},{label:"KYC",content:a.jsx(a.Fragment,{children:"KYC..."})}],selected:1})}),a.jsxs(F,{spacing:2,direction:"row",sx:{mt:3},children:[a.jsx(i,{size:"large",type:"submit",variant:"contained",color:"primary",children:"Spara"}),a.jsx(i,{size:"large",variant:"outlined",color:"primary",onClick:()=>r(-1),children:"Tillbaka"})]})]})]})};export{X as default};
