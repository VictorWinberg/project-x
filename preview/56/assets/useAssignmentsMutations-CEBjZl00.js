import{r as A,j as e,G as n,l as o,m}from"./index-D_Hw0TWc.js";import{u as F,C as j}from"./index.esm-A9JwaDwY.js";import{u as I}from"./useContactsQueries-DcVqT0cv.js";import{F as S,s as E}from"./FlexGrow-XCmFbLwy.js";import{A as c}from"./object-BaR1jdoG.js";import{u as p,a as d}from"./useSnackbar-Cap1duEj.js";import{c as k,b as C,d as q}from"./useAssignmentsQueries-luIR53uY.js";const N=({onSubmit:r=()=>{},onChange:s,formProps:f,children:b,...h})=>{const{data:l=[]}=I(),{register:i,control:x,handleSubmit:y,watch:v}=F(f),g=v();return A.useEffect(()=>{s==null||s(g)},[s,g]),e.jsx(S,{...h,children:e.jsxs("form",{onSubmit:y(r),style:{...E},children:[e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:12,children:e.jsx(o,{fullWidth:!0,label:"Uppdragsnamn",type:"text",margin:"none",...i("assignmentName")})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(j,{name:"responsiblePersonId",control:x,render:({field:a})=>e.jsx(c,{options:l,getOptionKey:t=>t.contactId,getOptionLabel:t=>t.contactName,value:l.find(t=>t.contactId===a.value)||null,onChange:(t,u)=>a.onChange(u?u.contactId:void 0),renderInput:t=>e.jsx(o,{...t,label:"Ansvarig",variant:"outlined",fullWidth:!0})})})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(j,{name:"externalContactPersonId",control:x,render:({field:a})=>e.jsx(c,{options:l,getOptionKey:t=>t.contactId,getOptionLabel:t=>t.contactName,value:l.find(t=>t.contactId===a.value)||null,onChange:(t,u)=>a.onChange(u?u.contactId:void 0),renderInput:t=>e.jsx(o,{...t,label:"Extern",variant:"outlined",fullWidth:!0})})})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(c,{multiple:!0,options:[],renderInput:a=>e.jsx(o,{...a,label:"Fastigheter",type:"text",...i("relevantFiles")}),limitTags:2,disableCloseOnSelect:!0})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(o,{fullWidth:!0,label:"Status",margin:"none",type:"text",...i("status")})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(o,{fullWidth:!0,label:"Typ",margin:"none",type:"text",...i("type")})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(o,{fullWidth:!0,label:"Arvode",margin:"none",type:"number",...i("fee")})})]}),b]})})},T=()=>{const r=m(),{showSnackbar:s}=p();return d({mutationFn:k,onSuccess:()=>{r.invalidateQueries({queryKey:["assignments"]}),s("Uppdrag skapat!")},onError:()=>{s("Ett fel uppstod när uppgiften skulle skapas.","error")}})},L=()=>{const r=m(),{showSnackbar:s}=p();return d({mutationFn:C,onSuccess:()=>{r.invalidateQueries({queryKey:["assignments"]}),s("Uppdrag uppdaterat!")},onError:()=>{s("Ett fel uppstod när uppgiften skulle uppdateras.","error")}})},P=()=>{const r=m(),{showSnackbar:s}=p();return d({mutationFn:q,onSuccess:()=>{r.invalidateQueries({queryKey:["assignments"]}),s("Uppdrag borttaget!")},onError:()=>{s("Ett fel uppstod när uppgiften skulle tas bort.","error")}})};export{N as A,L as a,P as b,T as u};
