import{b,u as c,a as d}from"./useSnackbar-BwbyVNzv.js";import{v as j,j as e,m,b1 as q,b2 as E,b3 as w,b4 as I,b5 as C,f as h,r as B,G as l,l as F,S as g}from"./index-B2iWnE6k.js";import{u as K,C as y}from"./index.esm-DLDzUCpG.js";import{F as M,s as Q}from"./FlexGrow-I-Gu2bHc.js";const U=j(e.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M17 13l-5 5-5-5h3V9h4v4z"}),"CloudDownload"),V=j(e.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload"),A=()=>b({queryKey:["files"],queryFn:I}),T=t=>b({queryKey:["file",t],queryFn:()=>C(t),enabled:!!t}),W=()=>{const t=m(),{showSnackbar:r}=c();return d({mutationFn:q,onSuccess:()=>{t.invalidateQueries({queryKey:["files"]}),r("Dokumentet sparat!")},onError:()=>{r("Ett fel uppstod när dokumentet skulle sparas.","error")}})},H=()=>{const t=m(),{showSnackbar:r}=c();return d({mutationFn:E,onSuccess:()=>{t.invalidateQueries({queryKey:["files"]}),r("Dokumentet uppdatarat!")},onError:()=>{r("Ett fel uppstod när dokumentet skulle uppdateras.","error")}})},O=()=>{const t=m(),{showSnackbar:r}=c();return d({mutationFn:w,onSuccess:()=>{t.invalidateQueries({queryKey:["files"]}),r("Dokumentet borttaget!")},onError:()=>{r("Ett fel uppstod när dokumentet skulle tas bort.","error")}})},G=({onChange:t,children:r,...u})=>{const i=o=>{o.target.files&&(t==null||t(o.target.files[0]))};return e.jsxs(h,{component:"label",role:void 0,variant:"contained",tabIndex:-1,startIcon:e.jsx(V,{}),...u,children:[r,e.jsx("input",{type:"file",style:{display:"none"},onChange:i})]})},P=({onSubmit:t=()=>{},onChange:r,formProps:u,children:i,...o})=>{const{control:x,handleSubmit:k,watch:S,setValue:p,formState:{errors:v}}=K(u),s=S();B.useEffect(()=>{r==null||r(s)},[r,s]);const D=n=>{p("documentName",n.name),p("content",n)};return e.jsx(M,{...o,children:e.jsxs("form",{onSubmit:k(t),style:{...Q},children:[e.jsxs(l,{container:!0,spacing:2,children:[e.jsx(l,{item:!0,xs:12,sm:6,children:e.jsx(y,{control:x,name:"documentName",rules:{required:!0},defaultValue:"",render:({field:n,fieldState:a})=>e.jsx(F,{fullWidth:!0,label:"Dokumentnamn",type:"text",margin:"none",...n,error:!!a.error})})}),e.jsx(l,{item:!0,xs:12,sm:6,children:e.jsx(y,{control:x,name:"content",rules:{required:!0},render:({field:n})=>{var a,f;return e.jsx(F,{fullWidth:!0,label:"Fil",type:"text",margin:"none",value:((a=n.value)==null?void 0:a.name)||"",disabled:!0,error:!!v.content,InputProps:{endAdornment:(f=s.content)==null?void 0:f.type}})}})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(g,{spacing:2,direction:"row",children:[e.jsx(G,{onChange:D,children:s.content?"Ersätt fil":"Välj fil"}),e.jsx(h,{startIcon:e.jsx(U,{}),variant:"contained",href:s.content?URL.createObjectURL(s.content):"#",download:s.documentName,disabled:!s.content,children:"Ladda ner"})]})})]}),i]})})};export{P as D,W as a,H as b,O as c,T as d,A as u};
