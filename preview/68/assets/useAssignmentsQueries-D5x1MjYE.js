import{p as o,t as c,g as i}from"./useSnackbar-C7Qg4ZWC.js";import{v as y,w as p,x as g,y as r,z as l}from"./index-DFBxvwmv.js";const d=async()=>{const e=await r("SELECT * FROM assignments ORDER BY assignment_name"),s=c(await r("SELECT * FROM contacts"),"contactId"),n=c(await r("SELECT * FROM companies"),"companyId");return e.map(C(s,n))},P=async e=>await l("assignments",{assignmentId:e}),f=async e=>await y("assignments",o(e,["assignmentName","responsiblePersonId","externalContactPersonId","relevantFiles","fee","type","status"])),w=async e=>await p("assignments",o(e,["assignmentName","responsiblePersonId","externalContactPersonId","relevantFiles","fee","type","status"]),o(e,["assignmentId"])),x=async({assignmentId:e})=>await g("assignments",{assignmentId:e});function C(e,s){return n=>{const t=e.get(n.responsiblePersonId),m=t&&s.get(t.companyId),a=e.get(n.externalContactPersonId),u=a&&s.get(a.companyId);return{...n,responsiblePerson:t&&{...t,company:m},externalContactPerson:a&&{...a,company:u}}}}const A=()=>i({queryKey:["assignments"],queryFn:d}),E=e=>i({queryKey:["assignment",e],queryFn:()=>P(e),enabled:!!e});export{E as a,w as b,f as c,x as d,A as u};
