import{J as w,j as e,Z as M,_ as k,$ as P,E as S,H as z,T as A,a0 as I,f as g,a1 as R,a2 as D,r as $,B as F,I as u,l as H}from"./index-CT3AHrBx.js";import{f as q,i as B,j as O}from"./useSnackbar-C2zLVHRn.js";import{u as V,F as p}from"./useQueryParam-D8UyOyx2.js";import{s as j}from"./FlexGrow-BwQ7dsQm.js";import{T as C}from"./Tooltip-IZIKTl7T.js";const W=w(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),J=({children:a,...l})=>e.jsx(M,{variant:"popover",popupId:`delete-popup-${l.id}`,children:t=>e.jsxs(e.Fragment,{children:[a(t),e.jsx(k,{...P(t),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:e.jsxs(S,{children:[e.jsx(z,{children:e.jsx(A,{variant:"body1",children:"Är du säker på att du vill ta bort?"})}),e.jsxs(I,{children:[e.jsx(g,{fullWidth:!0,onClick:t.close,color:"inherit",variant:"outlined",children:"Avbryt"}),e.jsx(g,{startIcon:e.jsx(W,{}),fullWidth:!0,onClick:s=>{var r;return[(r=l.onClick)==null?void 0:r.call(l,s),t.close()]},color:"error",variant:"contained",children:"Ta bort"})]})]})})]})});var h={},K=D;Object.defineProperty(h,"__esModule",{value:!0});var E=h.default=void 0,L=K(R()),Q=e;E=h.default=(0,L.default)((0,Q.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");var x={},U=D;Object.defineProperty(x,"__esModule",{value:!0});var y=x.default=void 0,Z=U(R()),G=e;y=x.default=(0,Z.default)((0,G.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");const ne=({editDisplayMode:a="row",state:l,...t})=>{const[s,r]=V("filters",p,[]),[b,c]=$.useState(a),T={editDisplayMode:b,setEditDisplayMode:c},v=q({state:{columnFilters:s,...l},onColumnFiltersChange:r,onCreatingRowSave:async({row:n,values:d,table:o})=>{var i;await((i=t.onCreate)==null?void 0:i.call(t,{...n.original,...d})),o.setCreatingRow(null),c(a)},onEditingRowSave:async({row:n,values:d,table:o})=>{var i;await((i=t.onUpdate)==null?void 0:i.call(t,{...n.original,...d},n.original)),o.setEditingRow(null),c(a)},displayColumnDefOptions:{"mrt-row-actions":{minSize:120,size:120,maxSize:120,grow:!1}},muiTablePaperProps:{sx:{...j,mx:-1,boxShadow:0}},muiTableContainerProps:{sx:{...j,height:"300px"}},positionActionsColumn:"last",renderRowActions:N(t,T),renderTopToolbarCustomActions:X(),muiTableBodyCellProps:({row:n,column:d,table:o})=>({onDoubleClick:()=>{c("row"),o.setEditingRow(o.getState().editingRow===n?null:n),queueMicrotask(()=>{const i=o.refs.editInputRefs.current[d.id];i==null||i.focus()})},onKeyDown:i=>{var m,f;i.key==="Escape"&&o.setEditingRow(null),i.key==="Enter"&&((f=(m=o.options).onEditingRowSave)==null||f.call(m,{exitEditingMode:()=>o.setEditingRow(null),row:n,table:o,values:n==null?void 0:n._valuesCache}))}}),...t}),{isLoading:_}=v.getState();return _?null:e.jsx(B,{table:v})},N=(a,l)=>({row:t,table:s})=>e.jsxs(F,{sx:{display:"flex",gap:"1rem"},children:[e.jsx(C,{title:"Edit",children:e.jsx(u,{onClick:()=>[s.setEditingRow(t),l.setEditDisplayMode("modal")],children:e.jsx(O,{})})}),e.jsx(J,{id:t.id,onClick:()=>{var r;(r=a.onDelete)==null||r.call(a,t.original),s.setEditingRow(null)},children:r=>e.jsx(C,{title:"Delete",children:e.jsx(u,{color:"error",...H(r),children:e.jsx(y,{})})})})]}),X=()=>({table:a})=>e.jsx(u,{onClick:()=>{a.setCreatingRow(!0)},children:e.jsx(E,{})});export{ne as D,J as a,E as d};
